Часть 2. Микроконтроллеры семейства Mega 
Для избежания несимметричных выбросов в этом режиме тоже  
реализована двойная буферизация записи в регистр OCRO (OCR2). Благодаря этому 
действительное изменение содержимого регистра сравнения происходит 
только в момент достижения счетчиком максимального значения $FF. 
Если в регистр сравнения записать значение $00 или $FF, то при  
следующем совпадении состояния счетчика и содержимого регистра сравнения  
выход схемы сравнения переключится в устойчивое состояние согласно 
Табл. 2.86. 
Таблица 2 86 Устойчивые состояния выхода схемы сравнения 
COMul 
1 
1 
1 
1 
СОМлО 
0 
0 
1 
1 
Регистр OCR/i 
$00 
$FF 
$00 
$FF 
Состояние вывода OC/i 
0 
1 
1 
0 
Примечание: п = 0 или 2 
Частота генерируемого в рассматриваемом режиме сигнала определяется 
выражениемУося ==Ус1к_1/о/512Лг, где N— коэффициент деления предделите- 
ля (см. Табл. 2.80). 
13.5.3. Асинхронный режим 
В моделях ATmega64x и ATmegal 28x в асинхронном режиме может  
работать таймер/счетчик ТО. В остальных моделях (кроме ATmega8515x) такой 
возможностью обладает таймер/счетчик Т2. 
В асинхронном режиме на вход предделителя поступает сигнал от  
кварцевого генератора таймера/счетчика, что позволяет использовать  
таймер/счетчик в качестве часов реального времени. Задатчиком частоты  
сигнала может быть как кварцевый резонатор, подключаемый к выводам 
TOSC1 и TOSC2 микроконтроллера, так и сигнал от внешней схемы,  
подаваемый на вывод TOSC1. Несмотря на то что тактовый генератор  
таймера/счетчика настроен на частоту 32768 Гц, частота кварцевого резонатора 
либо сигнала от внешней схемы может лежать в пределах 0...256 кГц. При 
этом она должна быть в четыре раза меньше частоты тактового сигнала  
микроконтроллера. 
Непосредственная запись в регистры TCNT0 (TCNT2), OCR0 (OCR2) и 
TCCR0 (TCCR2) в асинхронном режиме синхронизируется с тактовым  
сигналом таймера/счетчика. При записи числа в любой из указанных регистров 
оно сохраняется в специальном временном регистре, своем для каждого  
регистра таймера/счетчика. А пересылка содержимого временного регистра в 
-276- 

Глава 21. Введение в программирование микроконтроллеров AVR 
Микроконтроллеры семейства Mega, кроме того, имеют  
возможность самопрограммирования. Под этим термином понимается  
изменение содержимого памяти программ, управляемое самим  
микроконтроллером. 
В процессе программирования могут выполняться следующие  
операции:' 
• стирание кристалла (Chip erase); 
• чтение/запись FLASH-памяти программ; 
• чтение/запись EEPROM-памяти данных; 
• чтение/запись конфигурационных ячеек; 
• чтение/запись ячеек защиты; 
• чтение ячеек идентификатора; 
• чтение калибровочного байта. 
Все модели микроконтроллеров поставляются со стертой памятью 
программ и памятью данных (во всех ячейках находится число «$FF») 
и пригодны к немедленному программированию. 
21.2. Защита кода и данных 
Содержимое FLASH-памяти (память программ), а также  
содержимое EEPROM-памяти (память данных) может быть защищено от  
записи и/или чтения посредством программирования ячеек защиты (Lock 
Bits) LB1 и LB2. Возможные режимы защиты, соответствующие  
различным состояниям этих ячеек, приведены в Табл. 4.2. 
Таблица 4.2. Режимы защиты 
Ячейки защиты 
№ режима 
1 
2 
3 
LB1 
1 
0 
0 
LB2 
1 
1 
0 
Описание 
Защита кода и данных отключена 
Последующая запись FLASH и EEPROM запрещена 
Запрещены запись и чтение FLASH и EEPROM 
В режимах 2 и 3 запрещается также изменение конфигурационных 
ячеек (см. далее). Поэтому включение защиты следует выполнять в  
самую последнюю очередь, после программирования остальных  
областей памяти микроконтроллера. 
Микроконтроллеры семейства Mega имеют четыре  
дополнительные ячейки защиты BLB02, BLB01, BLB12 и BLB11. Ячейки 
BLB02:BLB01 определяют уровень доступа из секции загрузчика к  
коду, расположенному в секции прикладной программы, а ячейки 
-473- 

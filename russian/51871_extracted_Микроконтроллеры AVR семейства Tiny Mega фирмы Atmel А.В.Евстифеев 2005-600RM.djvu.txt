Часть 2. Микроконтроллеры семейства Mega 
Как показано на рисунке, в состав каждого блока входят собственно 
10-разрядный предделитель и выходной мультиплексор (селектор тактового 
сигнала), а для таймеров, имеющих возможность работы в асинхронном  
режиме, — еще и входной мультиплексор исходного тактового сигнала. По 
схеме, приведенной на Рис. 2.67, выполнен предделитель таймера/счетчика 
ТО моделей ATmega64x/l 28х и таймера/счетчика Т2 остальных моделей. 
Следует иметь в виду, что все таймеры/счетчики каждой модели 
семейства, не имеющие асинхронного режима работы, используют 
один и тот же 10-разрядный предделитель. Соответственно в  
моделях ATmega64x и ATmegal28x это таймеры/счетчики Tl, T2 и ТЗ; 
в моделях ATmegal62x — ТО, Т1 и ТЗ; в остальных моделях — ТО и 
Т1. При этом управление тактовым сигналом каждого  
таймера/счетчика осуществляется индивидуально и будет описано при 
их рассмотрении. 
Следует понимать, что предделители работают независимо от  
таймеров/счетчиков. Следствием этого является, в частности,  
неопределенный промежуток времени A...jY+1 тактов исходного сигнала, где N — 
коэффициент деления предделителя) между разрешением  
таймера/счетчика и первым его отсчетом при работе совместно с предделителем.  
Чтобы уйти от этой неопределенности, можно воспользоваться средствами, 
описанными в следующем подразделе. 
13.4.1. Управление предделителями 
Помимо управления тактовым сигналом таймера/счетчика, все  
микроконтроллеры семейства позволяют осуществлять сброс предделителей, а  
модели ATmegal62x, ATmega64x и ATmegal28x позволяют также осуществлять 
их остановку. Для этого используется регистр специальных функций SFIOR. 
Формат этого регистра для различных моделей микроконтроллеров  
приведен на Рис. 2.68 (разряды, не используемые для управления  
предделителями таймеров/счетчиков, указаны на рисунке как «X»). 
Для сброса предделителей таймеров/счетчиков используются  
разряды PSRx регистра. При записи в эти разряды лог. 1 предделители  
соответствующих таймеров/счетчиков переводятся в исходное состояние. 
Разряды сбрасываются в «О» аппаратно после выполнения операции 
сброса. Еще раз напоминаем, что один предделитель может  
использоваться несколькими таймерами/счетчиками и, соответственно, сброс 
предделителя повлияет на все таймеры/счетчики, использующие его. 
Остановка всех предделителей микроконтроллера осуществляется  
записью лог. 1 в разряд TSM регистра SFIOR. Последующий запуск  
предделителей осуществляется записью в разряд TSM лог. 0. Указанная функция может 
-262- 

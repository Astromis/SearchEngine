Глава 13. Таймеры 
рабочий регистр таймера/счетчика осуществляется по третьему после  
записи положительному фронту сигнала на выводе TOSC1. Соответственно  
запись нового значения можно производить только после пересылки  
содержимого временного регистра в регистр таймера/счетчика. 
Для определения момента действительного изменения регистров  
таймера/счетчика, а также для переключения таймера/счетчика в асинхронный 
режим предназначен регистр ASSR. Положение этого регистра в разных  
моделях микроконтроллеров указано в Табл. 2.78. Формат этого регистра  
приведен на Рис. 2.74, а описание отдельных его разрядов приведено в 
Табл. 2.87. 
Рис. 2.74. Формат регистра ASSR 
Таблица 2.87. Разряды регистра состояния асинхронного режима ASSR 
Разряд 
7...4 
3 
2 
Название 
- 
AS/i 
TCNwUB 
Описание 
Зарезервированы, читаются как «0» 
Переключение режима работы. Если разряд установлен в«1», на вход предделите- 
ля таймера/счетчика Тя поступают импульсы с кварцевого генератора  
таймера/счетчика (асинхронный режим). В этом режиме выводы TOSC1 и TOSC2  
используются для подключения кварцевого резонатора и соответственно не могут 
использоваться как контакты ввода/вывода общего назначения. Если разряд 
сброшен в «0», на вход предделителя поступает внутренний тактовый сигнал 
микроконтроллера. В этом случае выводы TOSC1 и TOSC2 являются линиями 
ввода/вывода общего назначения. При изменении состояния этого разряда  
содержимое регистров TCNT2, OCR2 и TCCR2 может быть повреждено 
Состояние обновления регистра TCNT/i. При записи в регистр TCNT/i 
этот флаг устанавливается в «1», а после пересылки записываемого  
значения в этот регистр, флаг аппаратно сбрасывается в «0». Таким образом, 
сброшенный флаг TCN/iUB означает, что регистр TCNTrt готов для  
записи в него нового значения Запись в регистр TCNT/i при установленном 
флаге TCN/?UB может привести к повреждению прежнего содержимого 
регистра и к генерации прерывания 
-277- 

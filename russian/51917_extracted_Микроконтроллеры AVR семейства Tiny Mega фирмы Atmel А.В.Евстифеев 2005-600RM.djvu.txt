Часть 2. Микроконтроллеры семейства Mega 
Продолжение таблицы 2.109 
ACIS1 
1 
1 
ACIS0 
0 
1 
Условие 
Изменение состояния выхода компаратора с «1» на «0» 
Изменение состояния выхода компаратора с «0» на «1» 
Помимо генерации прерывания, компаратор также может управлять 
схемой захвата таймера/счетчика Т1. Для этого необходимо установить в «1» 
разряд ACIC регистра ACSR. В результате выход компаратора подключится 
к схеме захвата вместо вывода ICP1 микроконтроллера. Если же разряд  
ACIC сброшен в «О», компаратор полностью отключен от блока захвата  
таймера/счетчика. 
Компаратор может сравнивать сигналы, присутствующие не только на 
выводах AJN0 и AIN1. Так, вместо вывода AIN0 микроконтроллера к неин- 
вертирующему входу компаратора может быть подключен внутренний  
источник опорного напряжения (ИОН) величиной 1.22 ±0.1 В. Для этого  
необходимо установить в «1» разряд ACBG (AINBG в моделях ATmegal61x) 
регистра ACSR. Причем если схема BOD выключена (BODEN = «1»), то  
между подключением ИОН к компаратору и началом использования  
компаратора необходимо выждать некоторое время (не более 100 мкс). 
На инвертирующий вход компаратора может также поступать сигнал с 
выхода мультиплексора модуля АЦП. Другими словами, вместо вывода 
AIN1 микроконтроллера инвертирующий вход компаратора может быть 
подключен к любому из входов АЦП ADC0...ADC7 (ADC0...ADC5 в  
моделях ATmega8x). Естественно, в моделях ATmega8515x, ATmegal61x и АТ- 
megal62x, не имеющих модуля АЦП, эта возможность недоступна. 
Подключение выхода мультиплексора АЦП к входу компаратора  
осуществляется установкой в «1» разряда ACME регистра специальных функций 
SFIOR C-й разряд регистра). Разумеется, модуль АЦП при этом должен 
быть выключен (разряд ADEN регистра ADCSRA сброшен в «0»). Какой 
именно из входов АЦП будет использоваться в качестве инвертирующего 
входа компаратора, определяется разрядами MUX2...0 регистра ADMUX, 
как показано в Табл. 2.110. 
Таблица 2.110. Управление инвертрующим входом компаратора 
ACME 
0 
1 
1 
1 
ADEN 
X 
1 
0 
0 
MUX2...0 
XXX 
XXX 
000 
001 
Инвертирующий вход компаратора 
AIN1 
AIN1 
ADC0 
ADC1 
-308- 

Глава 13. Таймеры 
13.5.2.1. Режим Normal 
Это наиболее простой режим работы таймеров/счетчиков. А в  
таймере/счетчике ТО моделей ATmega8x и ATmegal63x это вообще  
единственный режим. В этом режиме счетный регистр функционирует как обычный 
суммирующий счетчик. По каждому импульсу тактового сигнала clkTO 
(clkT2) осуществляется инкремент счетного регистра. При переходе через 
значение $FF возникает переполнение, и счет продолжается со  
значения $00. В том же такте сигнала clkTO (clkT2), в котором обнуляется  
регистр TCNTO (TCNT2), устанавливается в «1» флаг переполнения TOV0 
(TOV2). 
В таймерах/счетчиках исполнений 2 и 3 при равенстве счетного  
регистра и регистра сравнения устанавливается флаг прерывания OCF0 
(OCF2) и, если разряд OCIE0 (OCIE2) регистра TIMSK установлен в «1», 
генерируется прерывание. Наряду с установкой флага при равенстве 
счетного регистра и регистра сравнения может изменяться состояние 
вывода ОС0 (ОС2) микроконтроллера. Каким образом оно будет  
изменяться, определяется разрядами СОМ01:СОМ00 (СОМ21:СОМ20)  
регистра TCCRO (TCCR2) в соответствии с Табл. 2.82. 
Таблица 2.82. Управление выводом ОС0 (ОС2) в режиме Normal 
СОМл1 
0 
0 
1 
1 
СОМнО 
0 
1 
0 
1 
Описание 
Таймер/счетчик Тл отключен от вывода ОСл 
Состояние вывода меняется на противоположное 
Вывод сбрасывается в «0» 
Вывод устанавливается в «1» 
Примечание: п = 0 или 2. 
При необходимости состояние вывода ОС0 (ОС2) может быть изменено 
принудительно, записью лог. 1 в разряд FOC0 (FOC2) регистра TCCR0 
(TCCR2). Прерывание при этом не генерируется. 
13.5.2.2. Режим СТС (сброс при совпадении) 
В этом режиме счетный регистр тоже функционирует как обычный  
суммирующий счетчик, инкремент которого осуществляется по каждому  
импульсу тактового сигнала clkT0 (clkT2). Однако максимально возможное  
значение счетного регистра и, следовательно, разрешающая способность 
счетчика определяется регистром сравнения OCR0 (OCR2). После  
достижения значения, записанного в регистре сравнения, счет продолжается со  
значения «$00». В том же такте сигнала clkT0 (clkT2), в котором обнуляется  
счетный регистр, устанавливается флаг прерывания TOV0 (TOV2) регистра 
TIFR. Временные диаграммы для этого режима работы таймера/счетчика 
приведены на Рис. 2.71. 
-271- 

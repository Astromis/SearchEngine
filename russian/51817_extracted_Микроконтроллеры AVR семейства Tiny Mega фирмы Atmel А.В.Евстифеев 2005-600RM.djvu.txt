Часть 2. Микроконтроллеры семейства Mega 
Продолжение таблицы 2.39 
Модель 
ATmega32x 
ATmega323x 
ATmega64x 
ATmegal28x 
Адрес регистра OSCCAL 
$31($51)* 
$31($51)* 
(S6F) 
($6F) 
* Регистр OSCCAL доступен из программы по указанному адресу только в том случае, если в 
конфигурационной ячейке OCDEN записана лог. 1. 
Чем больше значение, записанное в регистре OSCCAL, тем больше 
частота генератора. Диапазон возможного изменения частоты /?С-генера- 
тора в зависимости от содержимого этого регистра указан в Табл. 2.40. 
Таблица 2.40. Влияние содержимого регистра OSCCAL на частоту внутреннего 
.ЯС-генератора 
Содержимое регистра 
OSCCAL 
$00 
$7F 
$FF 
/min 
(в процентах от номинальной) 
50 
75 
100 
/мах 
(в процентах от номинальной) 
100 
150 
200 
Значение, необходимое для подстройки генератора на номинальную 
частоту (с точностью ±1%) записывается при изготовлении  
микроконтроллера в специальные калибровочные ячейки, количество которых равно  
числу номинальных частот внутреннего ЛС-генератора данной модели.  
Содержимое этих ячеек доступно только в режиме программирования 
микроконтроллеров. В микроконтроллерах ATmegal63x и ATmega323x  
программатор должен считать содержимое калибровочной ячейки и записать 
его в заранее определенное место FLASH-памяти программ (как правило, в 
последнюю ячейку). А в самом начале программы необходимо прочитать 
содержимое по этому адресу и загрузить его в регистр OSCCAL. 
В остальных моделях загрузка калибровочной константы для частоты 
1 МГц осуществляется аппаратно при каждом включении питания. Если же 
требуется другая частота внутреннего /?С-генератора, соответствующее  
значение должно загружаться в регистр OSCCAL программным путем, как 
описано выше. 
Следует помнить, что внутренний генератор предназначен для работы на 
номинальных частотах. Поэтому подстройка на другие частоты хотя и  
возможна, но не гарантируется. Более того, внутренний /JC-генератор  
определяет временные параметры доступа к FLASH- и EEPROM-памяти, поэтому 
увеличение частоты генератора более чем на 10% может привести к  
невозможности записи в эти области памяти. 
-208- 

Часть 1. Микроконтроллеры семейства Tiny 
риодически (через промежутки времени, меньшие его периода)  
сбрасываться командой WDR. 
Для управления сторожевым таймером предназначен регистр 
WDTCR (Watch Dog Timer Control Register), расположенный по адресу 
$21 (в моделях ATtiny28x — по адресу $01). Формат этого регистра  
приведен на Рис. 1.58, а краткое описание разрядов этого регистра  
приведено в Табл. 1.46. 
Рис. 1.58. Формат регистра WDTCR 
Таблица 1.46. Разряды регистра WDTCR 
Разряд 
7...5 
4 
3 
2...0 
Название 
- 
WDTOE 
WDE 
WDP2...WDP0 
Описание 
Зарезервированы 
Разрешение выключения сторожевого таймера 
Разрешение сторожевого таймера («1» - включен) 
Коэффициент деления предцелителя сторожевого таймера 
Для включения/выключения сторожевого таймера используются 
два разряда регистра WDTCR - WDE и WDTOE. Если разряд WDE 
(Watch Dog Enable) установлен в «1», сторожевой таймер включен, если 
разряд WDE сброшен в «0», сторожевой таймер выключен.  
Непосредственно перед включением таймера рекомендуется также выполнять 
его сброс командой WDR. 
Чтобы избежать непреднамеренного выключения сторожевого 
таймера, предназначен разряд WDTOE (Watch Dog Timer On Enable). 
Дело в том, что выключение сторожевого таймера (сброс разряда 
WDE) можно осуществить только при установленном разряде 
WDTOE, который аппаратно сбрасывается через 4 машинных цикла 
после установки в «1». За счет этого практически исключается  
возможность случайного выключения сторожевого таймера. 
Исходя из сказанного, для выключения сторожевого таймера  
необходимо одной командой записать лог. 1 в разряды WDE и WDTOE 
или в течение следующих четырех машинных циклов записать лог. 0 
в разряд WDE. 
-98- 

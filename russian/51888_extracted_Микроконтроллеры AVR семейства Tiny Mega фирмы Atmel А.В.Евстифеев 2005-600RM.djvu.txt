Глава 13. Таймеры 
чика для «пробуждения» микроконтроллера. Если перевод  
микроконтроллера в режим Power Save или Extended Standby осуществляется сразу же  
после записи в регистры таймера/счетчика, необходимо убедиться, что 
операция записи завершена. Наиболее важно это в случае, когда для  
«пробуждения» микроконтроллера используется прерывание от блока  
сравнения, поскольку во время записи в регистр TCNTO (TCNT2) или OCR 
(OCR2) работа блока сравнения заблокирована. Соответственно, если  
переход в спящий режим произойдет до окончания операции записи в  
указанные регистры, прерывания от схемы сравнения никогда не произойдет и 
микроконтроллер не сможет выйти из спящего режима. 
Кроме того, необходимо быть осторожным при повторном  
переходе в режим Power Save или Extended Standby после выхода из них по 
прерыванию от таймера/счетчика. Дело в том, что в этом случае для 
запуска подсистемы прерываний требуется промежуток времени, 
равный одному периоду сигнала на выводе TOSC1. Если же  
промежуток времени между «пробуждением» и повторным переходом в 
спящий режим будет меньше указанного, генерации прерывания и 
соответственно перехода микроконтроллера в рабочий режим не 
произойдет. Для формирования задержки требуемой длительности 
рекомендуется после «пробуждения» микроконтроллера выполнить 
запись в какой-либо из регистров таймера/счетчика и дождаться  
завершения этой операции. 
После подачи напряжения питания, а также после «пробуждения»  
микроконтроллера из режима Power Down или Standby таймер/счетчик  
рекомендуется использовать только спустя секунду после указанных событий. 
Эта задержка необходима для запуска тактового генератора  
таймера/счетчика. Соответственно при выходе из режима Power Down или Standby  
содержимое всех регистров таймера/счетчика можно считать потерянным (из-за 
нестабильности тактового сигнала во время запуска генератора). Причем это 
справедливо не только при использовании кварцевого резонатора, но и при 
использовании внешнего тактового сигнала. 
13.6. Таймеры/счетчики Т1 и ТЗ 
Шестнадцатиразрядный таймер/счетчик Т1 присутствует во всех  
моделях микроконтроллеров семейства Mega, а таймер/счетчик ТЗ — только в 
моделях ATmegal62x (отсутствует в режиме совместимости с ATmegal61x) и 
ATmega64x/ATmegal28x. Как и таймеры/счетчики ТО и Т2, они могут  
использоваться для формирования временных интервалов, для подсчета числа 
внешних событий, формирования сигналов и генерации сигналов с ШИМ 
(но уже переменной разрядности). В дополнение к этому таймеры/счетчики 
-279- 

Глава 9. Архитектура микроконтроллеров 
Рис. 2.37. Косвенная адресация памяти программ 
Еще раз отметим, что команда не имеет ограничений только для  
микроконтроллеров семейства, выпущенных на момент написания книги. В  
будущем вполне возможно появление микроконтроллеров с объемом памяти 
программ более 128 Кбайт, для которых команда IJMP также будет иметь 
ограничение по области действия. Забегая вперед, заметим, что для таких 
устройств в системе команд микроконтроллеров AVR уже предусмотрена 
команда удлиненного косвенного перехода, позволяющая адресовать 
8 Мбайт памяти программ. 
Как и команда относительного перехода, команда косвенного перехода 
выполняется за 2 машинных цикла. 
9.3.6. Команды вызова подпрограмм 
Как и для реализации безусловных переходов, для вызова подпрограмм в 
микроконтроллерах семейства Mega имеются три комавды: команда  
относительного вызова RCALL, команда абсолютного вызова CALL, а также 
команда косвенного вызова ICALL Если не принимать во внимание  
некоторые отличия, описанные ниже, эти команды работают так же, как и  
соответствующие команды безусловного перехода. 
Относительный вызов подпрограммы — команда RCALL 
Сначала команда RCALL сохраняет в стеке значение счетчика команд. 
Затем содержимое счетчика команд увеличивается или уменьшается на 
некоторое значение, являющееся операндом команды (Рис. 2.35).  
Поскольку операнд представляет собой 12-разрядное число, максимальная 
величина перехода составляет -2047...+2048 слов (±4 Кбайта). 
В программах в качестве операндов этой команды, как и в случае  
команды RJMP, используются метки. Ассемблер сам вычисляет величину перехода 
и подставляет это значение в слово команды. 
Команда относительного вызова подпрограмм выполняется за 3  
машинных цикла, два из которых затрачиваются на сохранение в стеке 
содержимого двухбайтного счетчика команд. 
-197- 

Глава 3. Устройство управления микроконтроллеров 
При наступлении любого из перечисленных событий во все  
регистры ввода/вывода заносятся их начальные значения (см. описания  
конкретных регистров), а в счетчик команд загружается значение $000  
(адрес вектора сброса). Если в программе используются какие-либо 
прерывания, то по этому адресу должна находиться команда  
относительного перехода RJMP на начало программы (к ее инициализацион- 
ной части). Если же прерывания в программе не используются, то  
программа может начинаться непосредственно с адреса $000. 
Следует сразу же сказать, что разные модели микроконтроллеров 
семейства предоставляют различные возможности по управлению 
процессом сброса. Однако логика работы схемы сброса одинакова для 
всех моделей. 
При наступлении какого-либо из поддерживаемых событий  
формируется внутренний сигнал сброса. Одновременно запускается  
таймер формирования задержки сброса. По истечении определенного 
промежутка времени внутренний сигнал сброса снимается и  
начинается выполнение программы. 
Все микроконтроллеры семейства позволяют определить событие, 
в результате которого произошел сброс устройства. Для этой цели в 
моделях ATtinyl lx, ATtinyl2x и ATtinyl5L используется регистр  
состояния микроконтроллера MCUSR, расположенный по адресу $34.  
Формат этого регистра различается для каждой группы  
микроконтроллеров семейства. В моделях ATtiny28x для определения источника сброса 
используется регистр управления и состояния микроконтроллера 
MCUCS, расположенный по адресу $07. Оба указанных регистра  
содержат набор флагов, состояние которых зависит от события,  
вызвавшего сброс устройства. 
Структурные схемы подсистемы сброса будут приведены далее при 
обсуждении особенностей, присущих конкретным моделям. 
3.4.1. Сброс по включению питания 
Все микроконтроллеры семейства Tiny имеют в своем составе  
схему сброса при включении питания (схема POR, Power-on Reset). Эта 
схема удерживает микроконтроллер в состоянии сброса до тех пор,  
пока нарастающее напряжение питания не достигнет некоторого  
порогового значения. Работает эта схема следующим образом. 
Когда нарастающее напряжение питания достигает порогового 
значения КРОт(Power-On Threshold, порог включения), начинает  
работать таймер задержки сброса. По окончании счета (после  
формирования задержки /tout) внутренний сигнал сброса снимается и  
происходит запуск микроконтроллера. 
-55- 

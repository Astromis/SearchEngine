Часть 2. Микроконтроллеры семейства Mega 
Если разряд PUD сброшен в «О» (начальное состояние), состояние 
подтягивающих резисторов будет определяться состоянием разрядов 
PORTxaj для каждого входа порта. Если же разряд PUD установлен в 
«1», подтягивающие резисторы отключаются от всех выводов  
микроконтроллера. 
Обратите внимание, что при переключении вывода между третьим 
состоянием (DDat* = «О», РОКТхп = «О») и состоянием ВЫСОКОГО 
уровня (DDxn = «1», РОКТхп — «1») происходит переход через одно из 
промежуточных состояний: либо включается подтягивающий резистор 
(DDxai = «0», PORTjw = «1»), либо выход переключается в состояние 
НИЗКОГО уровня (DDjw= «I», PORTxw = «0»). Наиболее  
применимым является, как правило, первый вариант, поскольку для высокоим- 
педансных систем безразлично, каким образом формируется 
ВЫСОКИЙ уровень. Если в каком-либо случае это не подходит,  
пользователь может отключить подтягивающие резисторы от всех портов 
установкой в «1» разряда PUD регистра SFIOR. 
Аналогичная ситуация возникает и при переключении между  
состоянием с включенным подтягивающим резистором (DDxn = «О», PORTjw = «1») 
и состоянием НИЗКОГО уровня (DDjw = «1», PORTxaz = «0»). В этом  
случае промежуточным состоянием является либо высокоимпедансное 
состояние (DDxn = «О», PORTaw = «О»), либо состояние ВЫСОКОГО 
уровня (DDxn = «1», РОКТхп = «1»). 
Все возможные сочетания состояний управляющих разрядов и  
соответственно конфигурации выводов портов сведены в Табл. 2.68. 
Таблица 2.68. Конфигурации выводов портов 
DDXAI 
0 
0 
0 
1 
1 
PORTXfl 
0 
1 
1 
0 
1 
PUD* 
(в SFIOR) 
X 
0 
1 
X 
X 
Функция 
вывода 
Вход 
Вход 
Вход 
Выход 
Выход 
Резистор 
Отключен 
Подключен 
Отключен 
Отключен 
Отключен 
Примечания 
Третье состояние (Hi-Z)** 
При подключении нагрузки между 
выводом и общим проводом, вывод 
является источником тока 
Третье состояние (Hi-Z) 
Выход установлен в «0» 
Выход установлен в «1» 
* Отсутствует в моделях ATmegal61x. 
** Состояние выводов порта при сбросе. 
Состояние вывода микроконтроллера (независимо от установок 
разряда DDxn) может быть получено путем чтения разряда PINxai  
регистра PINjc. При этом следует помнить, что между действительным 
изменением сигнала на выводе и изменением разряда PINjcw  
существует задержка. Эта задержка вносится узлом синхронизации, состоя- 
-252- 

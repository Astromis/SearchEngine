Глава 2. Архитектура микроконтроллеров 
троллер сам управляет перемещением данных по стеку. Чтобы лучше  
понять работу стека, обратитесь к Рис. 1.24 и Рис. 1.25. 
Рассмотрим выполнение команды RCALL (Рис. 1.24): содержимое 
счетчика команд пересылается на 1-й уровень стека, а предыдущие 
значения предварительно «сползают» на один уровень (значение,  
находившееся на первом уровне, перемещается на второй уровень и т. д.). 
Заметим, что в результате этой операции будет потеряно значение, 
расположенное на 3-м уровне стека. 
При выполнении команды возврата из подпрограммы RET или RE- 
TI (Рис. 1.25) значение, хранящееся на 1-м уровне стека, заносится в 
счетчик команд. Во время этой операции все значения «поднимаются» 
на один уровень вверх (значение, находившееся на втором уровне,  
перемещается на первый уровень и т. д.). 
Счетчик команд (PC) I 
i 
Уровень №1 
Стек« Уровень №2 
Уровень №3 
Содержимое 3-го | 
уровня теряется g 
Рис. 1.24. Работа стека 
при выполнении 
команды RCALL 
Счетчик команд (PC) 
Уровень №1 
Стек< Уровень №2 
Уровень №3 
Содержимое 3-го | 
уровня не меняется g 
Рис. 1.25. Работа стека 
при выполнении 
команды RET 
-47- 

Глава 7. Аналого-цифровой преобразователь 
ADCH и ADCL Эти регистры при включении микроконтроллера  
содержат значение «$0000» и расположены по адресам $05 и $04. Обращение к 
этим регистрам (для получения результата преобразования) должно  
выполняться в определенной последовательности: сначала необходимо  
прочитать регистр ADCL, а затем ADCH. Это требование связано с тем, что 
после обращения к регистру ADCL процессор блокирует доступ к  
регистрам данных со стороны АЦП до тех пор, пока не будет прочитан регистр 
ADCH. Благодаря этому можно быть уверенным, что при чтении  
регистров в них будут находиться составляющие одного и того же результата.  
Соответственно, если очередное преобразование завершится до обращения к 
регистру ADCH, результат преобразования будет потерян. С другой  
стороны, если для результата преобразования достаточно точности 8 разрядов, 
то для его получения достаточно прочитать содержимое регистра ADCH. 
Для управления выравниванием результата преобразования служит 
разряд ADLAR регистра ADMUX (см. ниже). Если этот разряд  
установлен в «1», результат преобразования выравнивается по левой  
границе 16-разрядного слова, если сброшен в «0» — по правой границе. 
Управление входным мультиплексором модуля АЦП, а также  
дополнительное управление модулем АЦП осуществляется с помощью 
регистра ADMUX, расположенного по адресу $07. Формат этого  
регистра приведен на Рис. 1.65, а краткое описание функций разрядов  
регистра приведено в Табл. 1.53. 
Рис. 1.65. Формат регистра ADMUX 
Таблица 1.53. Разряды регистра ADMUX 
Разряд 
7,6 
5 
4,3 
2...0 
Название 
REFS1REFS0 
ADLAR 
- 
MUX2...MUX0 
Описание 
Выбор источника опорного напряжения 
Выравнивание результата преобразования 
Зарезервировано 
Выбор входного канала 
Разряды MUX2...MUX0 этого регистра определяют номер  
активного канала (аналоговый вход, подключенный к входу АЦП) согласно 
Табл. 1.54. При выборе канала с дифференциальным входом эти  
разряды определяют также коэффициент предварительного усиления  
входного сигнала. 
—109 — 

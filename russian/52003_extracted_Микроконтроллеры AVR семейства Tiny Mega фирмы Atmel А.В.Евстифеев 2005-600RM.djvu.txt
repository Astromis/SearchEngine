Часть 3. Команды микроконтроллеров семейств Tiny и Mega 
Продолжение таблицы 3.2 
Проверка 
 
«Переполнение» 
«Ноль» 
Логическое 
условие 
V=l 
Z=l 
Команда 
BRVS 
BREQ 
Обратная 
проверка 
«Нет  
переполнения» 
«Не ноль» 
Логическое 
условие 
V=0 
z = o 
Команда 
BRVC 
BRNE 
данных 
- 
- 
* Для перехода по этому условию операнды предшествующей команды сравнения должны 
быть записаны в обратном порядке, т. е. вместо СР Rd; Rr —> СР Rr, Rd. 
Вообще говоря, команды, указанные в Табл. 3.2, являются всего 
лишь эквивалентными мнемоническими обозначениями команд 
BRBS s, к и BRBC s, к с определенными значениями операнда «s». 
Команда BREQ к имеет, например, такой же код операции, что и 
команда BRBS 1, к, а команда BRGE k — BRBC 4 , к. 
Команды вызова подпрограммы (ICALL, RCALL и CALL) работают 
практически так же, как и команды безусловного перехода. Отличие 
заключается в том, что, перед тем- как выполнить переход, значение 
счетчика команд сохраняется в стеке. Кроме того, подпрограмма 
должна заканчиваться командой возврата RET, как показано в  
следующем примере: 
rcall sp_test 
sp_test 
push r2 
pop r2 
ret 
; Вызов подпрограммы «sp_test>: 
;Текст основной программы 
;Метка подпрограммы 
/Сохранить г 2 в стеке 
;Выполнение подпрограммы 
/Восстановить г2 из стека 
/Возврат из подпрограммы 
В приведенном примере команда RET заменяет адрес, находящийся 
в счетчике команд, адресом команды, следующей за командой CALL. 
Очевидно, что команды передачи управления нарушают  
нормальное (линейное) выполнение основной программы. Каждый раз, когда 
выполняется команда из этой группы (кроме команд сравнения),  
нормальное функционирование конвейера нарушается. Перед загрузкой 
в конвейер нового адреса производится остановка и очистка  
выполняемой последовательности команд. Соответственно, реинициализа- 
ция конвейера приводит к необходимости использования нескольких 
машинных циклов для выполнения таких команд. Чтобы получить 
более точную информацию, обратитесь к таблицам, приведенным 
в разделе 19.4. 
-396- 

Часть 2. Микроконтроллеры семейства Mega 
Рис. 2.92. Регистр SFIOR 
Для разрешения работы АЦП необходимо записать лог. 1 в разряд ADEN 
регистра ADCSR, а для выключения — лог. 0. Если АЦП будет выключено 
во время цикла преобразования, то преобразование завершено не будет 
(в регистре данных АЦП останется результат предыдущего преобразования). 
В моделях ATmega8x, ATmegal63x, ATmega323x и ATmegal28x режим 
работы АЦП определяется состоянием разряда ADFR. Если он установлен 
в «1», АЦП работает в режиме непрерывного преобразования. В этом  
режиме запуск каждого следующего преобразования осуществляется  
автоматически после окончания текущего. Если же разряд ADFR сброшен в «0», 
АЦП работает в режиме одиночного преобразования и запуск каждого 
преобразования осуществляется по команде пользователя. 
В микроконтроллерах ATmegal6x, ATmega32x и ATmega64x запуск АЦП 
возможен не только по команде пользователя, но и по прерыванию от  
некоторых периферийных устройств, имеющихся в составе микроконтроллера. 
Для выбора режима работы в этих моделях используется разряд ADATE  
регистра ADCSR и разряды ADTDS2...0 регистра SFIOR (ADCSRB в моделях 
ATmega64x). 
Если разряд ADATE сброшен в «0», АЦП работает в режиме одиночного 
преобразования. Если же разряд ADTAE установлен в «1»,  
функционирование АЦП определяется содержимым разрядов ADTS2...0 согласно 
Табл. 2.115. 
Таблица 2.115. Источник сигнала для запуска преобразования в ATmegal6x 
ADTS2 
0 
0 
0 
0 
1 
ADTS1 
0 
0 
1 
1 
0 
ADTS0 
0 
1 
0 
1 
0 
Источник стартового сигнала 
Режим непрерывного преобразования 
Прерывание от аналогового компаратора 
Внешнее прерывание INTO 
Прерывание по событию «Совпадение» таймера/счетчика ТО 
Прерывание по переполнению таймера/счетчика ТО 
-314- 

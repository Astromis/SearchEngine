Часть 1. Микроконтроллеры семейства Tiny 
• если же прерывание запрещено (флаг разрешения прерывания 
сброшен), флаг прерывания остается в состоянии «1» до  
разрешения прерывания (в этом случае он будет сброшен аппаратно),  
либо до программного сброса этого флага; 
• выполняется подпрограмма обработки прерывания; 
• выполняется команда возврата из прерывания RETI, при этом 
флаг I аппаратно устанавливается в «1», разрешая обработку  
последующих прерываний; 
• центральный процессор автоматически восстанавливает  
содержимое счетчика команд. Затем основная программа продолжает 
свое выполнение с того места, где она была прервана. 
При вызове подпрограмм обработки прерываний регистр  
состояния SREG не сохраняется. Поэтому пользователь должен  
самостоятельно запоминать содержимое этого регистра при входе в  
подпрограмму обработки прерывания (если это необходимо) и 
восстанавливать его значение перед вызовом команды RETI. 
Следует помнить, что для прерываний, вызываемых статическими 
событиями (например, для прерывания, генерируемого при равенстве 
содержимого счетного регистра и регистра сравнения таймера), флаг 
прерывания устанавливается только в момент возникновения  
события. Если флаг прерывания сброшен, а условия генерации прерывания 
присутствуют, флаг будет установлен только в момент возникновения 
следующего события. 
С другой стороны, для внешних прерываний, генерируемых по 
уровню, флаги не предусмотрены, поэтому информация об этих  
прерываниях будет храниться до тех пор, пока присутствует событие,  
вызывающее прерывание. 
Микроконтроллеры семейств Tiny поддерживают очередь  
прерываний, которая работает следующим образом: если условия  
генерации одного или более прерываний возникают в то время, когда флаг 
общего разрешения прерываний сброшен (все прерывания  
запрещены), соответствующие флаги устанавливаются в «1» и остаются в 
этом состоянии до установки флага общего разрешения прерываний. 
После разрешения прерываний выполняется их обработка в  
соответствии с приоритетом. 
Наименьшее время отклика для любого прерывания составляет 
4 машинных цикла. В течение этих циклов происходит сохранение 
счетчика команд в стеке. В течение следующих двух циклов  
выполняется команда перехода к подпрограмме обработки прерывания. Если 
прерывание произойдет во время выполнения команды длящейся  
несколько циклов, то генерация прерывания произойдет только после 
-68- 

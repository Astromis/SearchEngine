Глава 16. Универсальный асинхронный приемопередатчик 
USART_Receive: 
ldi rl7,HIGH(-l) 
ldi rl8,LOW(-l) 
no_error: 
/Выделить 9-й разряд данных 
lsr rl7 
andi rl7,0x01 
ret 
Пример на С 
unsigned int USART_Receive(void) 
{ 
unsigned char status, resh, resl 
/* Ждать заполнения буфера приемника */ 
while (! (UCSRA & A«RXC) ) ) 
/* Прочитать 9-й разряд данных и флаги состояния */ 
status = UCSRA; 
resh = UCSRB; 
/* Прочитать младший байт данных */ 
resl = UDR; 
/* В случае ошибки вернуть -1*/ 
if (status & A«FE) | A«DOR) | A«UPE) ) 
return -1; 
/* Выделить 9-й разряд данных */ 
resh = (resh>>l) & 0x01; 
return ( (resh<<8) | resl); 
} 
Собственно прием всех разрядов кадра осуществляется по-разному, в  
зависимости от режима работы модуля. При работе модуля USART 
в синхронном режиме состояние вывода RXD (RXD/i) считывается по  
одному из фронтов сигнала ХСК (ХСКл). Если разряд UCPOL (UCPOLw)  
регистра UCSRC (UCSRflC) сброшен в «0», считывание состояния вывода 
происходит по спадающему фронту сигнала ХСК (ХСКл), если же  
установлен в «1» — по нарастающему фронту сигнала. Другими словами,  
считывание данных с вывода RXD (RXDsz) и их вьщача на вывод TXD (TXDai)  
происходят по противоположным фронтам (Рис. 2.101). 
Для обеспечения приема в асинхронном режиме работы используются 
схемы восстановления тактового сигнала и данных. Схема восстановления 
-343- 

Часть 2. Микроконтроллеры семейства Mega 
Продолжение таблицы 2.148 
Состояние шины и 
модуля TWI 
Действия программы 
в/из 
TWDR 
в регистр 
TWCR 
Следующее действие, 
выполняемое модулем TWI 
Нет 
действий 
Переключиться в режим неадресованного ведо- 
мого; распознавание любых вызовов  
запрещено 
Нет 
действий 
$С0 
Был передан байт 
данных и получено 
неподтверждение 
(NACK) 
Переключиться в режим неадресованного ведо- 
мого; разрешено распознавание SLA с  
собственным адресом; разрешено распознавание  
общих вызовов, если TWGCE = «1» 
Нет 
действий 
Переключиться в режим неадресованного ведо- 
мого; распознавание любых вызовов  
запрещено; после освобождения шины будет  
сформировано состояние СТАРТ 
Нет 
действий 
Переключиться в режим неадресованного  
ведомого; разрешено распознавание SLA с  
собственным адресом; разрешено распознавание  
общих вызовов, если TWGCE = «1»; после 
освобождения шины будет сформировано  
состояние СТАРТ 
Нет 
действий 
Переключиться в режим неадресованного ведо- 
мого; распознавание любых вызовов  
запрещено 
Нет 
действий 
$С8 
Был передан  
последний байт данных и 
получено  
подтверждение (АСК) 
Переключиться в режим неадресованного ведо- 
мого; разрешено распознавание SLA с  
собственным адресом; разрешено распознавание  
общих вызовов, если TWGCE = «1» 
Нет 
действий 
Переключиться в режим неадресованного ведо- 
мого; распознавание любых вызовов  
запрещено; после освобождения шины будет  
сформировано состояние СТАРТ 
Нет 
действий 
Переключиться в режим неадресованного ведо- 
мого; разрешено распознавание SLA 
с собственным адресом; разрешено  
распознавание общих вызовов, если TWGCE = «1»;  
после освобождения шины будет сформировано 
состояние СТАРТ 
При передаче последнего байта данных необходимо сбросить в «О»  
разряд TWEA. После этого модуль перевдет в состояние с кодом статуса $С0 
или $С8 в зависимости от того, какой сигнал (АСК или NACK) передаст 
ведущий в ответ. В состояние с кодом статуса $С8 модуль TWI перевдет 
в случае, если ведущий затребовал дополнительные данные, передав 
-384- 

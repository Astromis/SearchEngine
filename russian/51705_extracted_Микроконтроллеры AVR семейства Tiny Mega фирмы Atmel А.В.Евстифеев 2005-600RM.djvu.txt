Глава 5. Таймеры в микроконтроллерах 
Состояние вывода РВ1 может быть изменено и принудительно. Для этого 
предназначен 2-й разряд регистра SFIOR — FOCI А При записи в него лог. 1 
состояние вывода РВ1 (ОС1А) изменяется в соответствии с содержимым  
разрядов СОМ 1А1: СОМ 1 АО регистра TCCR1А (см. Ткбл. 1.42). Прерывание при 
этом не генерируется. При чтении разряда FOCI А всегда возвращается лог. 0. 
5.4.3. Режим ШИМ 
В этом режиме таймер/счетчик Т1 представляет собой  
Широтно-импульсный модулятор и используется для генерирования сигнала 
с программируемыми частотой и скважностью. Для перевода таймера/ 
счетчика Т1 в режим ШИМ необходимо установить в «1» разряд PWM1 
регистра управления таймером TCCR1. 
При работе таймера/счетчика Т1 в режиме ШИМ состояние счетного  
регистра изменяется от $00 до значения, находящегося в регистре OCR1 В, после 
чего счетный регистр сбрасывается и цикл повторяется. При равенстве  
содержимого счетного регистра и регистра сравнения OCR1A состояние вывода 
РВ1 (ОС1А) микроконтроллера изменяется в соответствии со значением  
разрядов СОМ1А1:СОМ1А0 регистра TCCR1 (см. Ткбл. 1.43 и Рис. 1.56). Таким 
образом, содержимое регистра OCR1A определяет скважность ШИМ-сигна- 
ла, а содержимое регистра OCR1В — его частоту (Ткбл. 1.44). 
Таблица 1.43. Поведение вывода РВ1 (ОС1А) в режиме ШИМ 
СОМ1А1 
0 
0 
1 
1 
СОМ1А0 
0 
1 
0 
1 
Поведение вывода РВ1 (ОС1А) 
Таймер/счетчик Т1 отключен от вывода 
Таймер/счетчик Т1 отключен от вывода 
Сбрасывается в «0» при равенстве регистров TCNT1 и OCR1A. 
Устанавливается в «1» при TCNT1 = $00 
(неинвертированный ШИМ-сигнал) 
Устанавливается в «1» при равенстве регистров TCNT1 и OCR1A. 
Сбрасывается в «0» при TCNT1 = $00 (инвертированный ШИМ-сигнал) 
Таблица 1.44. Зависимость частоты ШИМ-сигнала от тактовой частоты 
таймера/счетчика Т1 
Частота тактового сигнала 
таймера/счетчика 
СК 
РСК/8 
РСК/4 
РСК/4 
РСК/2 
РСК/2 
РСК/2 
Содержимое регистра 
OCR1B 
159 
159 
213 
159 
255 
213 
181 
Частота ШИМ-сигнала 
№) 
10 
20 
30 
40 
50 
60 
70 
-95- 

Глава 6. Аналоговый компаратор 
6.1. Общие сведения 
Аналоговый компаратор входит в состав всех без исключения  
моделей микроконтроллеров семейства. Будучи включенным, этот  
компаратор позволяет сравнивать значения напряжений,  
присутствующих на двух выводах микроконтроллера. Результатом сравнения 
является логическое значение, которое может быть прочитано из 
программы. По результату сравнения также может быть  
сгенерировано прерывание. 
Используемые компаратором выводы являются контактами 
портов ввода/вывода общего назначения. В качестве  
неинвертирующем) входа (AIN0) используется вывод РВО, а в качестве  
инвертирующего (AIN1) - РВ1. 
Чтобы указанные линии портов ввода/вывода могли  
использоваться аналоговым компаратором, они должны быть сконфигурированы 
как входы (соответствующий разряд регистра DDRB установлен в «1»). 
Внутренние подтягивающие резисторы, если они подключены, при 
разрешении работы компаратора отключаются автоматически. 
6.2. Функционирование компаратора 
Структурная схема аналогового компаратора приведена на 
Рис. 1.59. Обратите внимание на то, что источник опорного  
напряжения и связанный с ним мультиплексор присутствуют только в моделях 
ATtinyl2x иATtinyl5L. 
Управление компаратором и контроль его состояния  
осуществляется с помощью регистра ACSR (Analog Comparator Status Register), 
расположенного по адресу $08. Формат этого регистра для различных 
моделей микроконтроллеров приведен на Рис. 1.60. Краткое описание 
разрядов этого регистра приведено в Табл. 1.48. 
-100- 

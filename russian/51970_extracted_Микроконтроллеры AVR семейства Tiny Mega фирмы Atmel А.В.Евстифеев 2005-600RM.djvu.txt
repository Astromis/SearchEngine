Глава ^.Последовательный двухпроводный интерфейс 
каскады, подключенные к выводам, содержат ограничители скорости 
нарастания сигнала, а входные каскады содержат фильтр, подавляющий 
паразитные импульсы длительностью менее 50 не. 
Оба вывода являются линиями портов ввода/вывода  
микроконтроллеров (Табл. 2.140). 
Таблица 2.140. Выводы микроконтроллеров, используемые модулем TWI 
Название 
Назначение 
SDA 
РС4 
РС1 
РС1 
РС1 
РС1 
PD1 
Линия данных 
SCL 
РС5 
РСО 
РСО 
РСО 
РСО 
PD0 
Линия тактового сигнала 
При использовании указанных выводов микроконтроллера модулем 
TWI к ним, как и при обычном их использовании, можно подключить  
внутренние подтягивающие резисторы. Это позволит в ряде случаев обойтись 
без внешних подтягивающих резисторов, требуемых спецификацией  
интерфейса TWI. 
Контроллер скорости передачи (Bit Rate Generator) 
Этот блок задает период следования импульсов на линии SCL при 
работе микроконтроллера в режиме ведущего. В моделях ATmegal63x и 
ATmega323x управление скоростью передачи (частотой сигнала SCL) 
осуществляется с помощью регистра TWBR. Частота формируемого сигнала 
SCL (при работе устройства в режиме ведущего) для этих моделей  
определяется выражением /scl=/clk/O6 + 27WBR). 
В моделях ATmega8x, ATmegal6x, ATmega32x, ATmega64x, ATmegal28x 
вместе с регистром TWBR используются два младших разряда 
(TWPS1:TWPSO) регистра TWSR. Для этих моделей частота формируемого 
сигнала SCL определяется выражением /SCL =/clk/( 16 + 2 TWBR • 4™^. 
В приведенных формулах /CLK — тактовая частота процессора, TWBR — 
значение, записанное в регистре TWBR,TWPS — значение разрядов 
TWPS1 :TWPS0 регистра TWSR. 
И регистр TWBR, и разряды TWPS1:TWPSO регистра TWSR доступны 
как для чтения, так и для записи в любой момент времени. При работе в  
режиме ведомого содержимое указанных разрядов безразлично, однако 
тактовая частота микроконтроллера в этом случае должна быть, как  
минимум, в 16 раз выше частоты сигнала SCL. 
-363- 
AThiega8x 
ATmegal63x 
ATmega32x 
AIYnega323x 
ATmega64x 
AIbiegal28x 

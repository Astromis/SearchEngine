Глава 13. Таймеры 
13.5.2.3. Режим Fast PWM 
Режим Fast PWM («Быстродействующий ШИМ») позволяет  
генерировать высокочастотный сигнал с широтно-импульсной модуляцией. В связи 
с высокой частотой генерируемого сигнала данный режим с успехом может 
использоваться в таких приложениях, как регулирование мощности,  
выпрямление, цифроаналоговое преобразование и др. 
Счетный регистр в этом режиме функционирует как суммирующий 
счетчик, инкремент которого осуществляется по каждому импульсу  
тактового сигнала clkT0 (clkT2). Состояние счетчика изменяется от $00 до $FF,  
после чего счетный регистр сбрасывается и цикл повторяется. При  
достижении счетчиком максимального значения устанавливается флаг прерывания 
TOV0 (TOV2) регистра TIFR. При равенстве содержимого счетного регистра 
и регистра сравнения OCR0 (OCR2) устанавливается флаг OCF0 (OCF2)  
регистра TIFR. 
Особенностью работы схемы сравнения в этом режиме является двойная 
буферизация записи в регистр OCR0 (OCR2), заключающаяся в том, что  
записываемое число на самом деле сохраняется в специальном буферном  
регистре. А изменение содержимого регистра сравнения происходит только в 
момент достижения счетчиком максимального значения $FF. Благодаря  
такому решению исключается появление несимметричных импульсов сигнала 
на выходе модулятора (помех), которые были бы неизбежны при  
непосредственной записи в регистр сравнения. 
Поведение вьюода ОС0 (ОС2) микроконтроллера в этом режиме также 
определяется содержимым разрядов СОМ01:СОМ00 (СОМ21:СОМ20)  
регистра TCCRO (TCCR2) (Табл. 2.84 и Рис. 2.72). 
Таблица 2.84. Поведение вывода ОС0 (ОС2) в режиме Fast PWM 
COMul 
0 
0 
1 
1 
COM/iO 
0 
1 
0 
1 
Поведение вывода OC/i 
Таймер/счетчик In отключен от вывода ОСи 
Зарезервировано 
Сбрасывается в «0» при равенстве регистров TCNTaj и OCR/*.  
Устанавливается в «1» при TCNT/7 = $00 (неинвертированный ШИМ-сигнал) 
Устанавливается в «1» при равенстве регистров TCNT/i и OCR/*.  
Сбрасывается в «0» при TCNTaj = $00 (инвертированный ШИМ-сигнал) 
Примечание: п = 0 или 2. 
-273- 

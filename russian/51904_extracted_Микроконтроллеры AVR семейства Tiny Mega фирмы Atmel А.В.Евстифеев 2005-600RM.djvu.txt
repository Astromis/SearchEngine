Глава 13. Таймеры 
В зависимости от установок разрядов WGM«3:0 (СТСя и PWMaj 1:0 в  
моделях ATmegal61x/163x/323x) максимальное значение счетчика  
(разрешение ШИМ-сигнала) является либо фиксированным значением, либо  
определяется содержимым определенных регистров таймера/счетчика 
(Табл. 2.98). Разрешающая способность определяется выражением 
R = log( ТОР + 1 )/log2, где ТОР - модуль счета. 
Таблица 2.98. Разрешающая способность модулятора в режиме 
Phase Correct PWM 
Номер 
режима 
1 
2 
3 
10** 
И** 
WGM/i3 
0 
0 
0 
1 
1 
WGM/i2 
(СТС1)* 
0 
0 
0 
0 
0 
WGM/fl 
(PWM11)* 
0 
1 
1 
1 
1 
WGMwO 
(PWM10)* 
1 
0 
1 
0 
1 
Разрешающая 
способность 
8 разрядов 
9 разрядов 
10 разрядов 
Переменная 
B...16) 
Переменная 
B...16) 
Модуль счета 
(ТОР) 
S00FF 
S01FF 
$03FF 
ICRM 
($0003...$FFFF) 
OCRazA 
($0003...$FFFF) 
* В моделях ATmegal61x/163x/323x. 
** В моделях ATmegal 61 х/163х/323х эти режимы отсутствуют. 
Примечания: п = 1 для таймера/счетчика Tl и п - 3 для таймера/счетчика ТЗ. 
Как и в режиме Fast PWM, при работе с какими-либо  
фиксированными значениями модуля счета для его задания рекомендуется 
использовать регистр захвата. При этом регистр OCR1A (OCR3A) 
может использоваться для формирования ШИМ-сигнала. Если же 
в процессе формирования ШИМ-сигнала его частота меняется 
очень часто, для задания модуля счета рекомендуется использовать 
регистр сравнения. 
При достижении счетчиком максимального значения происходит 
смена направления счета, но счетчик остается в этом состоянии в течение 
одного периода сигнала clkT, (clkT3). В этом же такте производится  
обновление содержимого регистра сравнения. Если модуль счета определяется 
регистром сравнения ICRajA (режим 10) или OCR/*А (режим 11),  
одновременно с обновлением регистра сравнения устанавливается флаг ICFai 
либо OCFwA соответственно. 
При достижении счетчиком минимального значения ($0000) также  
происходит смена направления счета и одновременно устанавливается флаг 
прерывания TOV1 (TOV3) регистра TIFR (ETIFR). При равенстве  
содержимого счетного регистра и какого-либо регистра сравнения устанавливается 
-295- 

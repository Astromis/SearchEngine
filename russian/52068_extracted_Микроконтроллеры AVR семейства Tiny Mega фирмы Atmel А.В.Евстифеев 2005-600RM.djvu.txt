Глава 20. Описание команд 
SPM 
Изменение содержимого памяти программ 
Операция 
Код операции 
Операнды 
Описание 
Регистр SREG 
Маш. циклов 
Tiny 
Пример 
Зависит от контекста: 
{Z} = SFFFF — стирание страницы памяти программ; 
{Z} = Rl:R0 — запись слова в память программ или запись страницы в буфер; 
{Z} = TEMP — пересылка содержимого буфера страницы в память программ; 
{BLBITS} = R1:RO - запись ячеек защиты загрузчика 
1001010111101000 
1 слово B байта) 
Нет операндов 
Эта команда может выполнять стирание отдельной страницы памяти программ, 
запись страницы памяти программ, а также изменение ячеек защиты загрузчика. 
Адрес страницы памяти программ или слова в ней содержится в регистре Z, а 
данные, если они необходимы, находятся в регистровой паре Rl:R0. 
Подробно использование этой команды описано в четвертой части книги 
I 
- 
Т 
- 
н 
- 
S 
- 
V 
- 
N 
- 
Z 
- 
С 
- 
Зависит от операции 
Нет 
Запись слова в память программ 
ldi r31,$F0 
clr гЗО ;Загрузить адрес в регистр Z 
ldi rl6,$CF /Загрузить данные 
mov rl,rl6 
ldi rl6,$FF 
mov rO,rl6 
ldi rl6,$03 ;Разрешить SPM (стереть страницу) 
out SPMCR,rl6 ; 
spm /Стереть страницу памяти программ по адресу 
;$F000 
ldi rl6,$01 ,-Разрешить SPM (записать слово в память 
/программ) 
out SPMCR,rl6 ; 
spm /Записать содержимое rl:r0 по адресу $F000 
-461- 

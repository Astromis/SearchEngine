Глава ^.Последовательный двухпроводный интерфейс 
Рис. 2.121. Формат регистра TWSR 
Таблица 2.143. Разряды регистра состояния TWSR 
Разряд 
7...3 
2 
1,0 
Название 
TWS7...TWS3 
- 
TWPS1:TWPSO 
Описание 
Состояние модуля TWI. 
Значение, содержащееся в этих разрядах, отражает состояние узлов  
модуля и шины TWI. Возможные коды статуса будут описаны при дальнейшем 
рассмотрении модуля TWI. Разряды TWS7...3 доступны только для чтения 
Зарезервирован, читается как «0» 
Коэффициент деления предцелителя контроллера скорости передачи. 
Состояние этих разрядов определяет коэффициент деления предделителя 
контроллера скорости передачи, управляя частотой генерируемого  
сигнала SCL (см. описание контроллера скорости передачи в начале 
подраздела) 
В регистре TWSR моделей ATmegal63x и ATmega323x эти разряды 
не используются (зарезервированы) и читаются как «0». 
18.4. Взаимодействие прикладной программы 
с модулем TWI 
Взаимодействие прикладных программ с модулем TWI базируется на 
использовании прерывания от модуля, которое возникает после каждого 
события, произошедшего на шине (прием байта, формирование состояний 
СТАРТ/СТОП и т. п.). Соответственно, во время передачи данных по шине 
программа может выполнять другие задачи. Если прерывание от модуля 
TWI по каким-либо причинам использовать нельзя, его можно запретить. 
В этом случае программа должна будет постоянно следить за состоянием 
флага TWINT для реагирования на события, происходящие на шине. 
Установка флага TWINT регистра TWCR означает, что модуль TWI 
закончил выполнение очередной операции и ожвдает реакции программы. 
-367- 

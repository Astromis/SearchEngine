Глава 23. Программирование по последовательному каналу 
побайтно заносится в буфер по командам «Загрузка страницы 
FLASH-памяти». В каждой команде передаются младшие разряды 
адреса изменяемой ячейки (положение ячейки внутри страницы) и 
записываемое значение. Содержимое каждой ячейки должно  
загружаться в следующей последовательности: сначала младший байт, 
потом старший. 
Фактическое программирование страницы FLASH-памяти  
осуществляется после загрузки буфера страницы по команде «Запись 
страницы FLASH-памяти». В команде передаются старшие  
разряды адреса ячеек (номер страницы). Как и в семействе Tiny,  
дальнейшее программирование можно выполнять только после  
завершения записи страницы. Для определения момента окончания 
записи можно использовать любой из описанных выше способов. 
Заметим, что, поскольку запись всех ячеек страницы происходит 
одновременно, для определения момента окончания записи по 
второму способу можно использовать любую ячейку, находящуюся 
на странице. 
23.4. Управление процессом программирования 
EEPROM-памяти 
Программирование EEPROM-памяти данных  
микроконтроллеров семейства Tiny осуществляется побайтно путем посылки команд 
«Запись EEPROM-памяти». В каждой команде передается адрес  
изменяемой ячейки и записываемое значение. Как и для памяти  
программ, дальнейшее программирование можно выполнять только  
после завершения записи предыдущей ячейки. Для определения 
момента окончания записи можно либо выдерживать между  
посылкой команд паузу длительностью не меньше /wd_eeprom (cm. Табл. 
4.15), либо контролировать содержимое ячейки после посылки  
команды записи. 
Во всех моделях семейства Mega программирование  
EEPROM-памяти осуществляется так же, как и в семействе Tiny, т. е. побайтно.  
Однако в моделях ATmegal62x доступен альтернативный способ записи 
EEPROM-памяти — постраничный. Содержимое страницы побайтно 
заносится в буфер по командам «Загрузка страницы  
EEPROM-памяти», а затем осуществляется фактическое программирование страницы 
EEPROM-памяти по команде «Запись страницы FLASH-памяти». Для 
определения момента окончания записи можно использовать любой 
из описанных выше способов. 
-497- 

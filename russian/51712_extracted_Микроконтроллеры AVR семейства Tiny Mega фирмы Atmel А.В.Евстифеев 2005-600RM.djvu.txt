Часть 1. Микроконтроллеры семейства Tiny 
По своему действию рассматриваемый узел микроконтроллера  
является обычным компаратором. Если напряжение на выводе AIN0  
(неинвертирующий вход) больше напряжения на выводе AIN1  
(инвертирующий вход), то результат сравнения будет равен «1». В противном 
случае результат сравнения будет равен «О». Этот результат  
сохраняется в разряде АСО регистра ACSR. 
Разряд ACD отвечает за включение и выключение компаратора. 
При включении напряжения питания все разряды регистра ACSR 
сбрасываются в «О», поэтому компаратор автоматически  
включается при подаче напряжения питания на микроконтроллер. Чтобы 
его выключить, разряд ACD следует установить в «1». При  
изменении состояния этого разряда необходимо запретить прерывание от 
компаратора. 
Как уже было отмечено, в соответствии с результатом  
сравнения схема компаратора может генерировать запрос на  
прерывание. Если состояние выхода компаратора (разряд АСО)  
изменилось заданным образом, устанавливается флаг прерывания ACI 
регистра ACSR и генерируется запрос на прерывание. Как и для 
других прерываний, этот флаг сбрасывается аппаратно при  
запуске подпрограммы обработки прерывания или программно, 
записью в него лог. 1. Для разрешения прерывания необходимо 
установить в «1» разряд ACIE регистра ACSR и, разумеется, флаг 
I регистра SREG. 
Условие генерации запроса на прерывание от компаратора 
определяется состоянием разрядов ACIS1:ACISO регистра ACSR 
в соответствии с Табл. 1.49. При изменении этих разрядов  
прерывание от компаратора (как и для разряда ACD) должно быть  
запрещено. 
Таблица 1 49 Условия генерации запроса на прерывание от компаратора 
ACIS1 
0 
0 
1 
1 
ACIS0 
0 
1 
0 
1 
Условие 
Любое изменение состояния выхода компаратора 
Зарезервировано 
Изменение состояния выхода компаратора с «1» на «0» 
Изменение состояния выхода компаратора с «0» на «1» 
В микроконтроллерах ATtinyl2x и ATtinyl5L к неинвертирующему 
входу компаратора вместо вывода AIN0 микроконтроллера может быть 
подключен внутренний источник опорного напряжения величиной 
-102- 

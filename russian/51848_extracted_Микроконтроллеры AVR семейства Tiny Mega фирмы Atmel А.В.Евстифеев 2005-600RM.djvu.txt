Глава 11. Прерывания 
4. Вектор сброса и таблица векторов прерываний располагаются в  
области загрузчика (BOOTRST = «О», IVSEL = «1»): 
Address Labels Code Comments 
.org $F000 
$F000 jmp RESET ;Обработчик сброса 
$F002 jmp EXT_INT0 /Обработчик IRQO 
$F004 jmp EXT_INT1 /Обработчик IRQ1 
$F04 4 jmp SPM_RDY /Обработчик прерывания 
... ... ;"готовность SPM" 
$F046 RESET: ldi rl6,high(RAMEND) /Начало основной 
/программы 
$F047 out SPH,rl6 
$F048 ldi rl6,low(RAMEND) 
$F04 9 out SPH,rl6 /Проинициализировали 
/указатель стека 
$F04A sei /Разрешили прерывания 
$F04B <команда> ххх 
11.3. Обработка прерываний 
Для глобального разрешения/запрещения прерываний предназначен 
флаг I регистра SREG. Для разрешения прерываний он должен быть  
установлен в «1», а для запрещения сброшен в «О». Индивидуальное разрешение 
или запрещение (маскирование) прерываний производится  
установкой/сбросом соответствующих разрядов регистров масок прерываний,  
рассматриваемых ниже. 
При возникновении прерывания флаг I регистра SREG аппаратно  
сбрасывается, запрещая тем самым обработку следующих прерываний. Однако в 
подпрограмме обработки прерывания этот флаг можно снова установить в 
«1» для разрешения вложенных прерываний. При возврате из  
подпрограммы обработки прерывания (при выполнении команды RETI) флаг I  
устанавливается аппаратно. 
Все имеющиеся прерывания можно разделить на два типа. Прерывания 
первого типа генерируются при наступлении некоторого события, в  
результате которого устанавливается флаг прерывания. Затем, если прерывание 
разрешено, в счетчик команд загружается адрес вектора соответствующего 
прерывания. При этом флаг прерывания аппаратно сбрасывается. Он также 
может быть сброшен программно, путем записи лог. 1 в разряд регистра,  
соответствующий флагу. 
- 239 - 

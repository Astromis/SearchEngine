Глава 17. Последовательный 
периферийный интерфейс SPI 
17.1. Введение 
Последовательный периферийный интерфейс SPI (Serial Peripheral  
Interface), реализованный во всех микроконтроллерах семейства Mega, имеет 
двоякое назначение. Во-первых, с его помощью может осуществляться  
обмен данными между микроконтроллером и различными периферийными 
устройствами, такими, как цифровые потенциометры, ЦАП/АЦП, 
FLASH-ПЗУ и др. Посредством этого интерфейса также может  
производиться обмен данными между несколькими микроконтроллерами AVR.  
Использование интерфейса SPI в качестве высокоскоростного канала связи и 
рассматривается в данной главе. 
Кроме того, через интерфейс SPI может быть осуществлено  
программирование микроконтроллера (т. н. режим последовательного  
программирования). Использование интерфейса SPI в этом качестве будет описано в 4-й 
части книги. 
При обмене данными по интерфейсу SPI микроконтроллер AVR может 
работать как ведущий (режим «Master») либо как ведомый (режим «Slave»). 
При этом пользователь может задавать скорость передачи (семь  
программируемых значений) и формат передачи (от младшего разряда к старшему или 
наоборот). 
Дополнительной возможностью подсистемы SPI является  
«пробуждение» микроконтроллера из режима Idle при поступлении данных. 
17.2. Функционирование модуля SPI 
Структурная схема модуля SPI приведена на Рис. 2.104. 
Модуль SPI использует четыре вьюода микроконтроллера. Как и для 
большинства прочих периферийных устройств, эти выводы являются  
линиями портов ввода/вывода общего назначения (Табл. 2.132). 
-347- 

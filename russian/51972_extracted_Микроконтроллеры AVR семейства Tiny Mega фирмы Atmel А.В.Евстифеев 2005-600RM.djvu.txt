Глава ^.Последовательный двухпроводный интерфейс 
перевести микроконтроллер в рабочий режим в случае адресации его 
ведущим устройством. 
Формат регистра TWAR показан на Рис. 2.119, а описание его разрядов 
приведено в Табл. 2.141. 
Разряд 
7...1 
0 
Название 
TWA6...TWA0 
TWGCE 
Описание 
Адрес устройства. В этих разрядах содержится адрес, на который 
устройство будет отзываться при работе в режиме ведомого. При работе 
устройства в режиме ведущего содержимое этих разрядов безразлично 
Разрешение распознавания общих вызовов. Если этот разряд 
установлен в «1», устройство будет отзываться на общие вызовы (пакеты 
с адресом $00) так же, как и на вызовы с адресом, находящимся в  
разрядах TWA6...0 регистра. Если разряд сброшен в «0», распознавание общих 
вызовов запрещено 
Блок управления (Control Unit) 
Этот блок осуществляет управление всем модулем TWI в соответствии с 
установками регистра управления TWCR и информацией, поступающей к 
нему от остальных блоков модуля. При наступлении определенных  
событий, указанных ниже, блок управления формирует в регистре состояния 
TWSR код статуса, соответствующий событию и устанавливает флаг запроса 
на прерывание TWINT регистра TWCR. До момента сброса этого флага на 
линии SCL удерживается НИЗКИЙ уровень, приостанавливая тем самым 
передачу данных по шине. 
Формирование запроса на прерывание осуществляется при  
возникновении следующих событий: 
• окончание формирования состояния СТАРТ/ПОВСТАРТ; 
• окончание передачи адресного пакета (SLA+R/W); 
• окончание передачи байта адреса; 
• потеря устройством приоритета; 
• адресация устройства или наличие общего вызова; 
• окончание приема байта данных; 
• возникновение ошибок на шине, обусловленных недопустимыми 
условиями формирования состояний СТАРТ/СТОП. 
-365- 
Рис. 2.119. Формат регистра TWAR 
Таблица 2.141. Разряды регистра адреса TWAR 

Глава 13. Таймеры 
регистр 0CR1A @CR3A) может использоваться для формирования 
ШИМ-сигнала. Если же в процессе формирования ШИМ-сигнала его  
частота меняется очень часто, для задания модуля счета рекомендуется  
использовать регистр сравнения. В этом случае за счет буферизации записи в  
регистры сравнения исключается появление несимметричных импульсов 
сигнала на выходе модулятора. 
При достижении счетчиком максимального значения устанавливается 
флаг прерывания TOV1 (TOV3) регистра TIFR (ETIFR). Одновременно с 
ним устанавливается флаг ICFn (режим 14) либо OCFflA (режим 15). 
При равенстве содержимого счетного регистра и какого-либо регистра 
сравнения устанавливается соответствующий флаг OCF1A/OCF1B/OCF1C 
(OCF3A/OCF3B/OCF3C) регистра TIFR. Одновременно изменяется  
состояние выхода блока сравнения ОСлА/ОСяВ/ОСяС. Поведение этих  
выходов определяется содержимым разрядов СОМлА^СОМяЛО регистров 
TCCR1A (TCCR3A) (Табл. 2.97). Временные диаграммы для случая, когда 
модуль счета определяется содержимым регистра ICR/iA или OCR/iА,  
показаны на Рис. 2.74. 
Таблица 197. Поведение вывода ОС1А/ОС1В/ОС1С (ОСЗА/ОСЗВ/ОСЗС) 
в режиме Fast PWM 
СОМлА1/СОМлВ1/ 
СОМлС1 
0 
0 
1 
1 
СОМлАО/СОМлВО/ 
СОМлСО 
0 
1 
0 
1 
Описание 
Таймер/счетчик Тл отключен от вывода 
ОСлА/ОСлВ/ОСлС 
WGM«3 = «0»: таймер/счетчик Тл отключен 
от вывода ОСлА/ОСяВ/ОСлС*; 
WGMfl3 = «1»: состояние вывода ОСяА  
меняется на противоположное 
Сбрасывается в «0» при равенстве счетного 
регистра и соответствующего регистра  
сравнения. Устанавливается в «1» при достижении 
счетчиком максимального значения (неин- 
вертированный ШИМ-сигнал) 
Устанавливается в «1» при равенстве счетного 
регистра и соответствующего регистра  
сравнения. Сбрасывается в «0» при достижении 
счетчиком максимального значения (неин- 
вертированный ШИМ-сигнал) 
* Также для моделей ATmega 161х/163х/323х. 
Примечание: п = 1 или 3. 
-293- 

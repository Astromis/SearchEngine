Часть 2. Микроконтроллеры семейства Mega 
Разряды UPM1:UPMO (иРМлШРМяО) регистра UCSRX (UCSR/*C) 
определяют функционирование схемы контроля четности модулей USART 
согласно Ткбл. 2.131. 
Таблица 2.131. Управление контролем четности 
UPM1 (UPM/il) 
0 
0 
1 
1 
UPMO (UPlVfoO) 
0 
1 
0 
1 
Режим работы 
Выключен 
Зарезервировано 
Включен, проверка на четность (even parity) 
Включен, проверка на нечетность (odd parity) 
Примечание: п = 1 или 2. 
Значение бита четности получается путем выполнения операции  
«Исключающее ИЛИ» над всеми разрядами передаваемого слова данных. Если 
используется проверка на нечетность (odd parity), полученный результат  
инвертируется: 
= dn_x ©...0</3 ®d2 ®dx ®d0 00, 
=dn.l ®...®d3®d2®d{ ®do®\. 
Если контроль четности включен, бит четности, как уже было сказано, 
вставляется передатчиком между старшим разрядом передаваемых данных и 
первым стоп-битом. 
16.2.3. Передача данных 
Работа передатчика разрешается установкой в «1» разряда TXEN 
(TXENai) регистра UCSRB (UCSRflB). При установке разряда вывод TXD 
(TXDm) подключается к передатчику USART/UART и начинает  
функционировать как выход независимо от установок регистров управления портом. 
Если используется синхронный режим работы (в US ART),  
переопределяется также функционирование вьюода ХСК (ХСКл). 
Передача инициируется записью передаваемых данных в буферный  
регистр передатчика — регистр данных' UDR. После этого данные  
пересылаются из регистра UDR в сдвиговый регистр передатчика. Одновременно,  
если используются 9-разрядные данные, значение разряда ТХВ8 (ТХВ8я) 
регистра UCSRB (UCSR/jB) копируется в 9-й разряд сдвигового регистра. 
При этом возможны два варианта: 
• запись в регистр UDR осуществляется в тот момент, когда  
передатчик находится в состоянии ожидания (предыдущие данные 
уже переданы). В этом случае данные пересылаются в сдвиговый 
регистр сразу же после записи в регистр UDR; 
-338- 

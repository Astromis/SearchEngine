Глава ^.Последовательный двухпроводный интерфейс 
Продолжение таблицы 2.145 
Код статуса 
ро 
р8 
$30 
$38 
Состояние шины 
и модуля TWI 
Был передан пакет 
SLA+W, а  
подтверждение не было  
принято (NACK) 
Был передан пакет 
данных и принято 
подтверждение 
(АСК) 
Был передан пакет 
данных, а  
подтверждение не было  
принято (NACK) 
Потеря приоритета 
при передаче пакета 
адреса или данных 
Действия программы 
B/H3TWDR 
Загрузить 
данные 
Нет действий 
Нет действий 
Нет действий 
Загрузить 
данные 
Нет действий 
Нет действий 
Нет действий 
Загрузить 
данные 
Нет действий 
Нет действий 
Нет действий 
Нет действий 
Нет действий 
в регистр TWCR 
STA 
0 
1 
0 
1 
0 
1 
0 
1 
0 
1 
0 
1 
0 
1 
STO 
0 
0 
1 
1 
0 
0 
1 
1 
0 
0 
1 
1 
0 
0 
TWINT 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
TWEA 
X 
X 
X 
X 
X 
X 
X 
X 
X 
X 
X 
X 
X 
X 
Следующее действие, 
выполняемое модулем TWI 
Будет передан байт данных. 
Будет получен АСК или NACK 
Будет сформировано состояние 
ПОВСТАРТ 
Будет сформировано состояние 
СТОП (флаг TWSTO будет  
сброшен) 
Будет сформировано состояние 
СТОП, а затем состояние СТАРТ 
(флаг TWSTO будет сброшен) 
Будет передан байт данных. 
Будет получен АСК или NACK 
Будет сформировано состояние 
ПОВСТАРТ 
Будет сформировано состояние 
СТОП (флаг TWSTO будет  
сброшен) 
Будет сформировано состояние 
СТОП, а затем состояние СТАРТ 
(флаг TWSTO будет сброшен) 
Будет передан байт данных. 
Будет получен АСК или NACK 
Будет сформировано состояние 
ПОВСТАРТ 
Будет сформировано состояние 
СТОП (флаг TWSTO будет  
сброшен) 
Будет сформировано состояние 
СТОП, а затем состояние СТАРТ 
(флаг TWSTO будет сброшен) 
Устройство освободит шину и  
перейдет в режим неадресованного  
ведомого 
После освобождения шины будет 
сформировано состояние СТАРТ 
-373- 

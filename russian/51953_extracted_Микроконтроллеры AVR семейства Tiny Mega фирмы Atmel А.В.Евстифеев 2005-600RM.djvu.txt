Часть 2. Микроконтроллеры семейства Mega 
Если указанные разряды установлены в «1», значит, кадр содержит адрес, 
если — в «О», кадр содержит данные. 
Для осуществления обмена данными в многопроцессорном режиме 
необходимо действовать следующим образом: 
l.Bce ведомые микроконтроллеры переключаются в режим 
мультипроцессорного обмена установкой в «1» разряда МРСМ 
(МРСМл) регистра UCSRA (UCSRM). 
2. Ведущий микроконтроллер посылает адресный кадр, а все 
ведомые микроконтроллеры его принимают. Соответственно 
в каждом из ведомых микроконтроллеров устанавливается флаг 
RXC (RXO0 регистра UCSRA (UCSR/iA). 
3. Каждый из ведомых микроконтроллеров считывает содержимое 
регистра данных. Микроконтроллер, адрес которого совпал 
с адресом, посланным ведущим, сбрасывает в «О» разряд МРСМ 
(МРСМл). 
4. Адресованный микроконтроллер начинает принимать кадры, 
содержащие данные. Если приемник ведомого микроконтроллера 
настроен на прием 5...8-разрядных данных, будет генерироваться 
ошибка кадрирования, поскольку первый стоп-бит будет равен 
«О» (в USART этого можно избежать, используя два стоп-бита). 
В остальных ведомых микроконтроллерах разряд МРСМ 
(МРСМя) установлен в «1», поэтому кадры данных будут 
игнорироваться. 
5. После приема последнего байта данных адресованный 
микроконтроллер устанавливает в «1» разряд МРСМ (МРСМя) и 
снова ожидает приход кадра с адресом. Процесс повторяется 
с пункта 2. 
-346- 

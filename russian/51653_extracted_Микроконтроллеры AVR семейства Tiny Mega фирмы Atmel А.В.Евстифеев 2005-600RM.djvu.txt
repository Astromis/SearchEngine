Глава 2. Архитектура микроконтроллеров 
результате загрузки в регистры новых значений адреса и данных во 
время записи в EEPROM процедура записи будет прервана, а  
результат этой записи не определен. 
С учетом сказанного фрагмент программы, осуществляющий  
чтение из EEPROM, выглядит следующим образом: 
EERead: 
sbic EECR,EEWE ;Ждать окончания 
/текущей записи, 
rjmp EERead /пока флаг EEWE 
;не станет равным «О» 
out EEAR, AddrReg /Загрузить адрес 
;(AddrReg - РОН) 
sbi EECR,EERE /Выдать строб чтения 
/из EEPROM 
in DataReg,EEDR /Прочитанный байт - 
/в РОН DataReg 
2.2.3.2. Меры предосторожности 
К сожалению, у EEPROM-памяти есть один недостаток: при  
снижении напряжения питания хранящиеся в ней данные могут быть  
повреждены. Это может произойти по двум причинам: 
• Если напряжение питания ниже некоторой величины, запись в 
EEPROM будет произведена некорректно. 
• Микроконтроллер сам может выполнять команды некорректно, 
если напряжение питания будет ниже нормы. 
Чтобы избежать повреждения данных, хранящихся в EEPROM, 
достаточно воспользоваться одним из трех следующих решений: 
1. Удерживать микроконтроллер в состоянии сброса все время, пока 
напряжение питания находится ниже нормы. Для этого следует 
использовать встроенный детектор пониженного напряжения  
питания (Brown-out Detector, BOD). Более подробно о нем будет 
рассказано в подразделе 3.4.4. 
2. Удерживать микроконтроллер в «спящем» режиме (Power Down) 
пока напряжение питания находится ниже нормы. Поскольку 
в этом режиме микроконтроллер не может выполнять никаких 
команд, такое решение эффективно защищает служебные  
регистры EEPROM от непреднамеренной записи. 
3. Хранить константы во FLASH-памяти программ, если они не 
должны меняться во время работы программы. Микроконтроллер 
не может самостоятельно производить запись в FLASH-память. 
Соответственно, при понижении напряжения питания ее  
содержимое не будет повреждено. 
-41- 

Глава ^.Последовательный двухпроводный интерфейс 
го ведомого, не формируя состояния СТОП. Другими словами,  
использование состояния ПОВСТАРТ позволяет осуществлять смену ведомых  
устройств, а также переключаться между режимами «Ведущий передатчик» и 
«Ведущий приемник» без утери контроля над шиной. 
Таблица 2.146. Коды статуса для режима «1 
$08 
$10 
$38 
$40 
$48 
$50 
$58 
Состояние шины 
и модуля TWI 
Было сформировано 
состояние СТАРТ 
Было сформировано 
состояние 
ПОВСТАРТ 
Потеря приоритета 
при передаче пакета 
адреса или данных 
Был передан пакет 
SLA+R и принято 
подтверждение 
(АСК) 
Был передан пакет 
SLA+R и принято 
неподтверждение 
(NACK) 
Был принят байт 
данных и передано 
подтверждение 
(АСК) 
Был принят байт 
данных и передано 
неподтверждение 
(NACK) 
Ведущий приемник» 
Действия программы 
в/из 
TWDR 
Загрузить 
SLA+R 
Загрузить 
SLA+R 
Загрузить 
SLA+W 
Нет 
действий 
Нет 
действий 
Нет 
действий 
Нет 
действий 
Нет 
действий 
Нет 
действий 
Нет 
действий 
Считать 
данные 
Считать 
данные 
Считать 
данные 
Считать 
данные 
Считать 
данные 
в регистр 
TWCR 
X 
X 
X 
0 
1 
0 
0 
1 
0 
1 
0 
0 
1 
0 
1 
0 
0 
0 
0 
0 
0 
0 
0 
1 
1 
0 
0 
0 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
1 
X 
X 
X 
X 
X 
0 
1 
X 
X 
X 
0 
1 
X 
X 
X 
Следующее действие, 
выполняемое модулем TWI 
Будет передан SLA+R. 
Будет получен АСК или NACK 
Будет передан SLA+R. 
Будет получен АСК или NACK 
Будет передан SLA+W. 
Модуль переключится в режим 
«Ведущий приемник» 
Устройство освободит шину и перейдет 
в режим неадресованного ведомого 
После освобождения шины будет 
сформировано состояние СТАРТ 
Будет принят байт данных и передано 
неподтверждение (NACK) 
Будет принят байт данных и передано 
подтверждение (АСК) 
Будет сформировано состояние 
ПОВСТАРТ 
Будет сформировано состояние СТОП 
(флаг TWSTO будет сброшен) 
Будет сформировано состояние СТОП, 
а затем состояние СТАРТ (флаг TWSTO 
будет сброшен) 
Будет принят байт данных и передано 
неподтверждение (NACK) 
Будет принят байт данных и передано 
подтверждение (АСК) 
Будет сформировано состояние 
ПОВСТАРТ 
Будет сформировано состояние СТОП 
(флаг TWSTO будет сброшен) 
Будет сформировано состояние СТОП, 
а затем состояние СТАРТ (флаг TWSTO 
будет сброшен) 
-377- 

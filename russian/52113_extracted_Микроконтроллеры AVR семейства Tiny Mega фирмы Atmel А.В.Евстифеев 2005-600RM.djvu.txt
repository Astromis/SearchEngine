Часть 4. Программирование микроконтроллеров семейств Tiny и Mega 
6. Загрузить старший байт данных. 
7. Записать старший байт данных. 
Временные диаграммы, иллюстрирующие 
FLASH-памяти, приведены на Рис. 4.10. 
процесс записи 
Рис. 4.10. Запись FLASH-памяти в микроконтроллерах семейства Tiny 
Отметим, что загруженные код команды и адрес сохраняются 
в микроконтроллере до следующей загрузки новой команды или,  
соответственно, нового адреса. Из этого следует, что при  
программировании участка памяти команду необходимо загружать только один раз, 
старший байт адреса необходимо загружать только при переходе к  
новому 256-байтному блоку памяти. Кроме того, не требуется записывать 
значение «$FF», поскольку оно уже находится в ячейках памяти после 
выполнения команды «Стирание кристалла». 
Следование этим рекомендациям позволит значительно ускорить 
процесс программирования. 
В семействе Mega запись FLASH-памяти производится в  
следующей последовательности (реализация каждого этапа процесса записи 
приведена в Табл. 4. 21): 
1. Загрузить команду «Запись FLASH-памяти» (код «0001 0000»). 
2. Загрузить младший байт адреса (положение ячейки внутри  
страницы). 
3. Загрузить младший байт данных. 
4. Загрузить старший байт данных. 
5. Запомнить данные в буфере. 
6. Повторить пп. 2...5 до полного заполнения буфера страницы. 
-506- 

Часть 2. Микроконтроллеры семейства Mega 
прерывания осуществляется установкой в «1» разряда TOIEO (TOIE2) 
регистра TIMSK (разумеется, флаг I регистра SREG также должен быть 
установлен в «1»). 
Регистр сравнения OCRO (OCR2) входит в состав блока сравнения  
модуля. Во время работы таймера/счетчика производится непрерывное (в  
каждом машинном цикле) сравнение этого регистра с регистром TCNT0 
(TCNT2). В случае равенства содержимого этих регистров в следующем  
машинном цикле устанавливается флаг OCFO (OCF2) регистра TIFR и  
генерируется прерывание (если оно разрешено). Кроме того, при наступлении  
этого события может изменяться состояние вывода ОСО (ОС2) 
микроконтроллера. Чтобы таймер/счетчик мог управлять состоянием  
вывода ОСО (ОС2), он должен быть сконфигурирован как выходной  
(соответствующий разряд регистра DDRx должен быть установлен в «1»). 
Еще раз напоминаем, что любая операция записи в счетный регистр 
блокирует формирование сигнала о совпадении, если оно произойдет в  
следующем такте. 
Регистр TCCRO (TCCR2) предназначен для управления модулем  
таймера/счетчика. Формат этого регистра приведен на Рис. 2.70, а описание его 
разрядов — в Табл. 2.79. 
Рис. 2.70. Формат регистров TCCR0 (а) и TCCR2 (б) 
-268- 

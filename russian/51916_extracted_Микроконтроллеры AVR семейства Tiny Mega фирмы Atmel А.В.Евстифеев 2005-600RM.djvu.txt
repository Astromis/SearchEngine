Глава 14. Аналоговый компаратор 
Продолжение таблицы 2.108 
Разряд 
4 
3 
2 
1,0 
Название 
ACI 
ACIE 
ACIC 
ACIS1:ACISO 
* В моделях ATmegal61 х. 
Описание 
Флаг прерывания от компаратора 
Разрешение прерывания от компаратора 
Подключение компаратора к схеме захвата 
таймера/счетчика Т1 («1» - подключен, «0» - отключен) 
Условие возникновения прерывания от компаратора 
По своему действию рассматриваемый узел микроконтроллера является 
обычным компаратором. Если напряжение на выводе AIN0  
(неинвертирующий вход) больше напряжения на вьюоде AIN1 (инвертирующий вход), 
то результат сравнения будет равен «1». В противном случае результат  
сравнения будет равен «0». Этот результат (состояние выхода компаратора)  
сохраняется в разряде АСО регистра ACSR. 
Разряд ACD отвечает за включение и выключение компаратора. 
Поскольку при подаче напряжения питания все разряды регистра 
ACSR сбрасываются в «0», компаратор включается автоматически 
при включении микроконтроллера. Для выключения компаратора 
разряд ACD следует установить в «1». При изменении состояния  
этого разряда прерывание от компаратора следует запретить. 
Как уже было сказано, по результату сравнения схема  
компаратора может генерировать запрос на прерывание. Если состояние  
выхода компаратора (разряд АСО) изменилось заданным образом,  
устанавливается флаг прерывания ACI регистра ACSR и генерируется 
запрос на прерывание. Как и для других прерываний, этот флаг  
сбрасывается аппаратно при запуске подпрограммы обработки  
прерывания или программно, записью в него лог. 1. Для разрешения  
прерывания необходимо установить в «1» разряд ACIE регистра ACSR и, 
разумеется, флаг I регистра SREG. 
Какое именно изменение состояния выхода компаратора вызовет  
прерывание, определяется состоянием разрядов ACIS1:ACISO регистра ACSR 
согласно Табл. 2.109. При изменении этих разрядов прерывание от  
компаратора (как и для разряда ACD) должно быть запрещено. 
Таблица 2.109. Условия генерации запроса на прерывание от компаратора 
ACIS1 
0 
0 
ACIS0 
0 
1 
Условие 
Любое изменение состояния выхода компаратора 
Зарезервировано 
-307- 

Часть 2. Микроконтроллеры семейства Mega 
Активный фронт сигнала, т. е. фронт, по которому будет  
выполнено сохранение содержимого счетного регистра в регистре захвата, 
определяется состоянием разряда ICES1 (ICES3). Если этот разряд 
сброшен в «О», то активным является спадающий фронт. Если разряд 
установлен в «1», то активным является нарастающий фронт. Для  
захвата по сигналу с вывода ICP1 (ICP3), этот вывод должен быть  
сконфигурирован как входной (разряд регистра DDRx, соответствующий 
выводу, должен быть сброшен в «О»). Если же он будет  
сконфигурирован как выходной, захват можно будет осуществлять программно, 
управляя соответствующим разрядом порта. 
Следует понимать, что между изменением состояния входа блока захвата 
и копированием счетного регистра в регистр захвата таймера/счетчика  
проходит некоторое время. Эту задержку вносит каскад, состоящий из  
синхронизатора (на рисунке не показан) и детектора фронта. Величина задержки 
составляет 2.5...3.5 машинных циклов. При включении схемы подавления 
помех задержка увеличивается еще на 4 машинных цикла. 
Для управления таймером/счетчиком используются три регистра  
управления: TCCR1A (TCCR3A), TCCR1B (TCCR3B), TCCR1C (TCCR3C). 
Формат этих регистров приведен на Рис. 2.77...2.79, а описание их  
разрядов—в Табл. 2.89...2.91. 
Рис. 2.77. Формат регистров TCCR1А (а) и TCCR3A (б) 
-284- 

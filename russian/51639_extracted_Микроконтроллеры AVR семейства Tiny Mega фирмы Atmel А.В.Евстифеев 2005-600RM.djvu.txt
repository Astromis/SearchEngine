Глава 2. Архитектура микроконтроллеров 
Для адресации памяти программ используется счетчик команд 
(PC — Program Counter). Размер счетчика команд составляет 9 или 10 
разрядов в зависимости от объема адресуемой памяти. 
По адресу $000 памяти программ находится вектор сброса. После 
инициализации (сброса) микроконтроллера выполнение программы 
начинается с этого адреса (по этому адресу рекомендуется размещать 
команду относительного перехода к инициализационной части  
программы). Начиная с адреса $001 располагается таблица векторов  
прерываний. Размер этой области зависит от модели микроконтроллера и 
составляет от 4 (адреса $001...$004) до 8 (адреса $001...$008) векторов 
(подробнее о распределении области векторов прерывания 
см. раздел 3.5). 
При возникновении прерывания после сохранения в стеке  
текущего значения счетчика команд происходит выполнение команды,  
расположенной по адресу соответствующего вектора. Поэтому по этим 
адресам располагаются команды относительного перехода к  
подпрограммам обработки прерываний. Ниже приведен типичный листинг 
начала программы для модели ATtiny28: 
Comments 
;Обработчик сброса 
/Обработчик внешнего 
;прерывания 
/Обработчик внешнего 
;прерывания 
/Обработчик прерывания 
;от порта В 
;Обработчик прерывания 
;от таймера ТО 
;Обработчик прерывания 
;от аналогового компаратора 
;Начало основной программы 
Address Labels 
$000 
$001 
$002 
$003 
$004 
$005 
$006 MAIN: 
Code 
rjmp RESET 
r]mp EXT_INT0 
rjmp EXT_INT1 
rjmp LOW_LEVEL 
rjmp TIM_OVF0 
rjmp ANA_COMP 
ldi rl6,low(RAMEND) 
out SPL,rl6 
<инструкция> xxx 
Если в программе прерывания не используются (запрещены), то 
основная программа может начинаться непосредственно с адреса $001. 
Следует отметить, что память программ может использоваться не 
только для хранения кода программы, но также и для хранения  
различных констант. Для пересылки байта из памяти программ в память  
данных имеется специальная команда — LPM Rd, Z. Адрес, по которому 
производится чтение, перед использованием этой команды должен быть 
загружен в индексный регистр Z (см. далее). При этом старшие 15 разря- 
-27- 

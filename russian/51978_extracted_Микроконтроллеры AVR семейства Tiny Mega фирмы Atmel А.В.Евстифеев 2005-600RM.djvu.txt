Глава ^.Последовательный двухпроводный интерфейс 
SLA+W модуль переходит в режим «Ведущий передатчик», а при передаче 
пакета SLA+R — в режим «Ведущий приемник». 
Формирование состояния СТАРТ начнется после записи в регистр 
TWCR следующего значения: 
В результате записи указанного значения модуль TWI начнет  
контролировать состояние шины и сформирует состояние СТАРТ сразу же, как 
только она станет свободной. 
По окончании формирования состояния СТАРТ устанавливается 
флагТМОТ; код статуса должен при этом иметь значение, равное $08 
(см. Табл. 2.144). Для переключения модуля в режим «Ведущий  
передатчик» необходимо передать по шине пакет SLA+W. Для этого содержимое 
пакета загружается в регистр TWDR, а в регистр TWCR заносится 
следующее значение: 
После передачи адресного пакета и приема бита подтверждения флаг 
TWINT снова устанавливается в «1». Код статуса на этом этапе может иметь 
одно из следующих значений: $18, $20 или $38. Какие действия необходимо 
предпринять при обнаружении того или иного кода, подробно рассмотрено 
в Табл. 2.145. 
После передачи адресного пакета должны быть переданы пакеты  
данных. Значение байта данных загружается в регистр TWDR. Передача пакета 
данных начинается после записи в регистр TWCR следующего значения: 
Описанная процедура используется для передачи всех пакетов данных. 
После передачи последнего байта данных, ведущий должен сформировать 
на шине состояние СТОП или ПОВСТАРТ Формирование состояния 
СТОП начнется после записи в регистр TWCR следующего значения: 
-371- 

Глава 26. Самопрограммирование микроконтроллеров семейства Mega 
Продолжение таблицы 4.26 
Разряд 
3 
2 
1 
0 
BLBSET 
PGWRT 
PGERS 
SPMEN 
Описание 
Изменение ячеек защиты загрузчика. При одновременной установке 
этого разряда и разряда SPMEN, команда SPM, запущенная в течение 
4-х машинных циклов, осуществит установку защитных ячеек  
загрузчика в соответствии с содержимым регистра R0. Сброс разряда 
BLBSET осуществляется аппаратно после установки ячеек защиты 
либо по истечении указанного времени. По команде LPM, запущенной 
в течение 3-х машинных циклов после установки указанных разрядов, 
будет осуществлено чтение либо конфигурационных ячеек, либо ячеек 
защиты (зависит от значения разряда Z0 регистра Z) 
Запись страницы. При одновременной установке этого разряда и 
разряда SPMEN, команда SPM, запущенная в течение 4-х машинных 
циклов, осуществит запись страницы памяти программ из временного 
буфера. Адрес страницы должен быть загружен в старший байт  
регистра Z (R31). Сброс разряда PGWRT осуществляется аппаратно по  
окончании записи страницы либо по истечении указанного времени. При 
записи в секцию NRWW центральный процессор останавливается 
на время выполнения операции* 
Стирание страницы. При одновременной установке этого разряда и 
разряда SPMEN, команда SPM, запущенная в течение 4-х машинных  
циклов, осуществит стирание страницы памяти программ из временного  
буфера. Адрес страницы должен быть загружен в старший байт регистра Z (R31). 
Сброс разряда PGERS осуществляется аппаратно по окончании стирания 
страницы либо по истечении указанного времени. При записи в секцию 
NRWW центральный процессор останавливается на время выполнения 
операции* 
Разрешение выполнения команды SPM. Установка этого разряда  
разрешает запуск команды SPM в течение 4-х машинных циклов. Если разряд 
SPMEN устанавливается одновременно с одним из разрядов RWWSRE, 
BLBSET, PGWRT или PGERS, выполняется операция, определяемая этим 
разрядом (см. описание разрядов). Если устанавливается только разряд 
SPMEN, осуществляется сохранение содержимого регистров R1:RO во  
временном буфере по адресу, находящемуся в регистре Z (МЗР регистра  
игнорируется). Сброс разряда SPMEN осуществляется аппаратно после  
завершения операции либо по истечении указанного времени 
Примечание 
Все модели 
Все модели 
Все модели 
Все модели 
* В моделях ATmegal61x, ATmegal63x и ATmega323x останавливается при обращении по  
любому адресу памяти программ. 
Запись в младшие пять разрядов регистра значений, отличных 
от «10001», «01001», «00101», «00011» и «00001» не вызывает никакого 
эффекта. 
-533- 

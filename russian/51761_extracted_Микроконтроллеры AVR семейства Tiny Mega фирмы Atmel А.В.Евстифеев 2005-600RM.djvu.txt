Глава 9. Архитектура микроконтроллеров 
кратна одному слову A6 бит), память программ имеет 16-разрядную  
организацию. Соответственно, объем памяти микроконтроллеров семейства  
составляет от 4К Dx1024) до 64К F4x1024) 16-разрядных слов. Логически  
память программ разделена на две неравные части — область прикладной 
программы и область загрузчика. В последней может располагаться  
специальная программа (загрузчик), позволяющая микроконтроллеру  
самостоятельно управлять загрузкой и выгрузкой прикладных программ. Подробно 
использование этой области и реализация программы-загрузчика будут  
рассмотрены в 4-й части книги (Глава 6). Если же возможность  
самопрограммирования микроконтроллера не использугтся, прикладная программа  
может располагаться и в области загрузчика. 
Для адресации памяти программ используется счетчик команд 
(PC — Program Counter). Размер счетчика команд составляет 12... 16 
разрядов, в зависимости от объема адресуемой памяти. 
По адресу $0000 памяти программ находится вектор сброса. После 
инициализации (сброса) микроконтроллера выполнение программы 
начинается с этого адреса (по этому адресу должна размещаться  
команда перехода к инициализационной части программы). Начиная с адреса 
$001 (модели ATmega8x и ATmega8515x) или $0002 (остальные модели) 
памяти программ, располагается таблица векторов прерываний. Размер 
этой области зависит от модели микроконтроллера (подробнее о  
распределении области векторов прерывания см. раздел 4.2). 
При возникновении прерывания после сохранения в стеке  
текущего значения счетчика команд происходит выполнение команды, 
расположенной по адресу соответствующего вектора. Поэтому по 
этим адресам располагаются команды перехода к подпрограммам  
обработки прерываний. В моделях с объемом памяти 8 Кбайт 
(ATmega8x и ATmega8515x) в качестве этих команд используются  
команды относительного перехода (RJMP), а в остальных моделях — 
команды абсолютного перехода (JMP). 
В отличие от микроконтроллеров AVR других семейств в  
большинстве микроконтроллеров семейства Mega положение вектора сброса 
и/или таблицы векторов прерываний может быть изменено. Они  
могут располагаться не только в начале памяти программ, как описано 
выше, но и в начале области загрузчика. Подробнее об этом будет  
сказано в 4-й части книги (Глава 26). 
Если прерывания в программе не используются либо таблица векторов 
прерываний располагается в области загрузчика, то основная программа  
может начинаться непосредственно с адреса $0001. 
Как известно, память программ может использоваться не только для 
хранения кода программы, но также и для хранения различных  
констант. Для пересылки байта из памяти программ в память данных име- 
-151- 

Глава ^.Последовательный двухпроводный интерфейс 
скольку такое поведение ничем не отличается от поведения после  
формирования состояния СТАРТ, в дальнейшем оба эти состояния (СТАРТ и 
ПОВСТАРТ) будут обозначаться как СТАРТ, кроме тех случаев, где их 
необходимо различать. 
Состояния СТАРТ и СТОП формируются путем изменения уровня  
сигнала на линии SDA при ВЫСОКОМ уровне на линии SCL. Состоянию 
СТАРТ соответствует смена уровня с «1» на «О», а состоянию СТОП — 
наоборот, с «О» на «1» (Рис. 2.112). 
Рис. 2.112. Состояния СТАРТ, СТОП и ПОВСТАРТ 
Заметим, что протокол интерфейса TWI позволяет подключать к шине 
несколько ведущих устройств (режим Multi-Master). При этом могут  
возникать различные проблемы, одной из которых является несовпадение частот 
тактовых сигналов, генерируемых разными ведущими. 
Задача синхронизации решается очень просто благодаря подсоединению 
всех устройств к линии SCL по схеме «монтажное И». В результате  
длительность тактовых импульсов на линии SCL определяется тактовым сигналом с 
наименьшей длительностью импульсов. А пауза между тактовыми  
импульсами, наоборот, определяется тактовым сигналом с наибольшей паузой  
между импульсами. Помимо этого, все ведущие контролируют уровень, 
присутствующий на линии SCL, и определяют момент начала отсчета 
импульса или паузы тактового сигнала по соответствующему изменению 
сигнала (Рис. 2.113). 
Другой задачей, которую приходится решать при подключении к шине 
нескольких ведущих устройств, является задача распределения  
приоритетов, в случае если два и более ведущих одновременно пытаются начать  
передачу. При возникновении такой ситуации передачу может осуществить 
только один ведущий, остальные же должны переключиться в режим  
ведомого. Причем передаваемые данные во время распределения приоритетов 
не должны искажаться. 
-357- 
